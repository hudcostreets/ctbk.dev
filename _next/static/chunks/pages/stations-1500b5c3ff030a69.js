(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[319],{97434:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stations",function(){return n(604)}])},90638:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(96856).Z;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=i.default,a=(null==t?void 0:t.suspense)?{}:{loading:function(e){e.error,e.isLoading;return e.pastDelay,null}};r(e,Promise)?a.loader=function(){return e}:"function"===typeof e?a.loader=e:"object"===typeof e&&(a=o({},a,e));!1;(a=o({},a,t)).suspense&&(delete a.ssr,delete a.loading);a.loadableGenerated&&delete(a=o({},a,a.loadableGenerated)).loadableGenerated;if("boolean"===typeof a.ssr&&!a.suspense){if(!a.ssr)return delete a.ssr,u(n,a);delete a.ssr}return n(a)},t.noSSR=u;var o=n(6495).Z,a=n(92648).Z,i=(a(n(67294)),a(n(14302)));function u(e,t){return delete t.webpack,delete t.modules,e(t)}("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&"undefined"===typeof t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},16319:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadableContext=void 0;var r=(0,n(92648).Z)(n(67294)).default.createContext(null);t.LoadableContext=r},14302:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(79658).Z,o=n(7222).Z;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(6495).Z,i=(0,n(92648).Z)(n(67294)),u=n(16319),s=n(67294).useSyncExternalStore,c=[],l=[],d=!1;function f(e){var t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then((function(e){return n.loading=!1,n.loaded=e,e})).catch((function(e){throw n.loading=!1,n.error=e,e})),n}var p=function(){function e(t,n){r(this,e),this._loadFn=t,this._opts=n,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}return o(e,[{key:"promise",value:function(){return this._res.promise}},{key:"retry",value:function(){var e=this;this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};var t=this._res,n=this._opts;t.loading&&("number"===typeof n.delay&&(0===n.delay?this._state.pastDelay=!0:this._delay=setTimeout((function(){e._update({pastDelay:!0})}),n.delay)),"number"===typeof n.timeout&&(this._timeout=setTimeout((function(){e._update({timedOut:!0})}),n.timeout))),this._res.promise.then((function(){e._update({}),e._clearTimeouts()})).catch((function(t){e._update({}),e._clearTimeouts()})),this._update({})}},{key:"_update",value:function(e){this._state=a({},this._state,{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading},e),this._callbacks.forEach((function(e){return e()}))}},{key:"_clearTimeouts",value:function(){clearTimeout(this._delay),clearTimeout(this._timeout)}},{key:"getCurrentValue",value:function(){return this._state}},{key:"subscribe",value:function(e){var t=this;return this._callbacks.add(e),function(){t._callbacks.delete(e)}}}]),e}();function m(e){return function(e,t){var n=function(){if(!c){var t=new p(e,o);c={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return c.promise()},r=function(){n();var e=i.default.useContext(u.LoadableContext);e&&Array.isArray(o.modules)&&o.modules.forEach((function(t){e(t)}))},o=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null,suspense:!1},t);o.suspense&&(o.lazy=i.default.lazy(o.loader));var c=null;if(!d){var f=o.webpack?o.webpack():o.modules;f&&l.push((function(e){var t=!0,r=!1,o=void 0;try{for(var a,i=f[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var u=a.value;if(-1!==e.indexOf(u))return n()}}catch(s){r=!0,o=s}finally{try{t||null==i.return||i.return()}finally{if(r)throw o}}}))}var m=o.suspense?function(e,t){return r(),i.default.createElement(o.lazy,a({},e,{ref:t}))}:function(e,t){r();var n=s(c.subscribe,c.getCurrentValue,c.getCurrentValue);return i.default.useImperativeHandle(t,(function(){return{retry:c.retry}}),[]),i.default.useMemo((function(){return n.loading||n.error?i.default.createElement(o.loading,{isLoading:n.loading,pastDelay:n.pastDelay,timedOut:n.timedOut,error:n.error,retry:c.retry}):n.loaded?i.default.createElement((t=n.loaded)&&t.__esModule?t.default:t,e):null;var t}),[e,n])};return m.preload=function(){return n()},m.displayName="LoadableComponent",i.default.forwardRef(m)}(f,e)}function h(e,t){for(var n=[];e.length;){var r=e.pop();n.push(r(t))}return Promise.all(n).then((function(){if(e.length)return h(e,t)}))}m.preloadAll=function(){return new Promise((function(e,t){h(c).then(e,t)}))},m.preloadReady=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(t){var n=function(){return d=!0,t()};h(l,e).then(n,n)}))},window.__NEXT_PRELOADREADY=m.preloadReady;var _=m;t.default=_},604:function(e,t,n){"use strict";n.r(t),n.d(t,{MAPS:function(){return h},__N_SSG:function(){return m},default:function(){return v}});var r=n(828),o=n(85893),a=n(9008),i=n.n(a),u=n(5152),s=n.n(u)()((function(){return Promise.all([n.e(269),n.e(86)]).then(n.bind(n,98086))}),{loadableGenerated:{webpack:function(){return[98086]}},ssr:!1}),c=n(214),l=n.n(c),d=n(61494);var f={lat:40.75,lng:-73.944},p=(Object.fromEntries,Math.sqrt),m=!0,h={openstreetmap:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"&copy; <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors"},alidade_smooth_dark:{url:"https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png",attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'}};function _(e,t){var n=e.TileLayer,r=(e.Marker,e.Circle),a=(e.CircleMarker,e.Tooltip),i=(e.useMapEvents,e.useMap,t.setLL,t.setZoom,t.counts),u=t.stations,s=t.url,c=t.attribution;return(0,o.jsxs)(o.Fragment,{children:[i.map((function(e){var t=e.id,n=e.count,i=u[t],s=i.name,c=i.lat,l=i.lng;return(0,o.jsx)(r,{center:{lat:c,lng:l},color:"orange",radius:p(n),children:(0,o.jsxs)(a,{sticky:!0,children:[s," (",t,"): ",n]})},t)})),(0,o.jsx)(n,{url:s,attribution:c})]})}function v(e){var t,n,a=e.counts,u=e.stations,c={ll:(t=f,n=3,{encode:function(e){var r=e.lat,o=e.lng;return r===t.lat&&o===t.lng?void 0:n?"".concat(r.toFixed(n),"_").concat(o.toFixed(n)):"".concat(r,"_").concat(o)},decode:function(e){if(!e)return t;var n=(0,r.Z)(e.split("_").map(parseFloat),2);return{lat:n[0],lng:n[1]}}}),z:(0,d.yc)(12)},p=(0,d.O5)({params:c}),m=(0,r.Z)(p.ll,2),v=m[0],y=v.lat,b=v.lng,g=m[1],j=(0,r.Z)(p.z,2),w=j[0],O=j[1],x="Citi Bike rides by station, August 2022",S=h.alidade_smooth_dark,k=S.url,Z=S.attribution;return(0,o.jsxs)("div",{className:l().container,children:[(0,o.jsxs)(i(),{children:[(0,o.jsx)("title",{children:x}),(0,o.jsx)("meta",{name:"twitter:card",content:"summary"},"twcard"),(0,o.jsx)("meta",{name:"twitter:creator",content:"RunsAsCoded"},"twhandle"),(0,o.jsx)("meta",{property:"og:url",content:"https://ctbk.dev/stations"},"ogurl"),(0,o.jsx)("meta",{property:"og:type",content:"website"}),(0,o.jsx)("meta",{property:"og:image",content:"https://ctbk.dev/stations/stations-screenshot.png"},"ogimage"),(0,o.jsx)("meta",{property:"og:site_name",content:"ctbk.dev"},"ogsitename"),(0,o.jsx)("meta",{property:"og:title",content:"Citi Bike Station Ridership Map"},"ogtitle"),(0,o.jsx)("meta",{property:"og:description",content:"Map of Citi Bike stations' ridership in August 2022"},"ogdesc")]}),(0,o.jsx)("main",{className:l().main,children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s,{className:l().homeMap,center:{lat:y,lng:b},zoom:w,zoomControl:!1,zoomSnap:.5,zoomDelta:.5,children:function(e){return(0,o.jsx)("div",{children:_(e,{setLL:g,setZoom:O,counts:a,stations:u,url:k,attribution:Z})})}}),(0,o.jsx)("div",{className:l().title,children:x})]})})]})}},61494:function(e,t,n){"use strict";n.d(t,{O5:function(){return y},W$:function(){return m},Yg:function(){return _},gO:function(){return h},wO:function(){return v},yc:function(){return l}});var r=n(82670),o=n(828),a=n(11163),i=n(67294),u=n(96486),s=n.n(u),c=RegExp("[^?#]+","u");function l(e){return{encode:function(t){return t===e?void 0:t.toString()},decode:function(t){return t?parseFloat(t):e}}}var d=Object.entries,f=Object.fromEntries,p=Object.keys;function m(e,t,n){var a=function(e){return Array.from(e).filter((function(e){return e in u||(console.warn("Invalid value: ".concat(e," not in ").concat(p(u).join(", "))),!1)}))},i=void 0===n?"_":n,u=(0,r.Z)(t,Array)?f(t):t,s=f(d(u).map((function(e){var t=(0,o.Z)(e,2),n=t[0];return[t[1],n]}))),c=function(e){return a(e).map((function(e){return u[e]})).join(i)},l=c(e);return{encode:function(e){var t=c(e);if(t!==l)return t},decode:function(t){if(!t&&""!==t)return e;var n=t.split(i).filter((function(e){return e in s||(console.warn("Unrecognized value: ".concat(e," not in ").concat(p(s).join(","))),!1)})).map((function(e){return s[e]}));return n=a(n)}}}function h(e,t){var n=(0,r.Z)(t,Array)?f(t):t,a=f(d(n).map((function(e){var t=(0,o.Z)(e,2),n=t[0];return[t[1],n]})));return{encode:function(t){if(t!=e)return n[t]},decode:function(t){return void 0===t?e:t in a?a[t]:(console.warn("Invalid enum: ".concat(t," not in ").concat(p(a).join(","))),e)}}}var _={encode:function(e){return e?"":void 0},decode:function(e){return void 0!==e}};function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=s().isEqual;return{encode:function(n){if(!t(n,e))return n.map((function(e){return e.toString()})).join(",")},decode:function(t){return void 0===t?e:t.split(",").map(parseInt)}}}function y(e){var t=e.params,n=(0,a.useRouter)(),r=n.asPath,u=r.replace(c,""),l=Object.fromEntries(new URLSearchParams(u).entries()),p=Object.fromEntries(Object.entries(t).map((function(e){var t=(0,o.Z)(e,2),n=t[0],r=t[1],a=(0,i.useState)(r.decode(l[n]));return[n,{val:a[0],set:a[1],param:r}]})));Object.values(p).map((function(e){return e.set}));(0,i.useEffect)((function(){window.onpopstate=function(e){var n=e.state.url,r=n.replace(c,"");console.log("onpopstate:",e,"newUrl:",n,"newSearchStr:",r,"oldSearchStr:",u);var a=Object.fromEntries(new URLSearchParams(r).entries());Object.entries(t).forEach((function(e){var t=(0,o.Z)(e,2),n=t[0],r=t[1].decode(a[n]),i=p[n],u=i.val,c=i.set,l=s().isEqual(u,r);l||(console.log("back! setting: ".concat(n,", ").concat(u," -> ").concat(r," (change: ").concat(!l,")")),c(r))}))}}),[r]),(0,i.useEffect)((function(){console.log("updating states: path",r,", searchStr:",u),Object.entries(t).forEach((function(e){var t=(0,o.Z)(e,2),n=t[0],r=t[1].decode(l[n]),a=p[n],i=a.val,u=a.set,c=s().isEqual(i,r);c||(console.log("update state: ".concat(n,", ").concat(i," -> ").concat(r," (change: ").concat(!c,")")),u(r))}))}),[r]);var m=r.match(c),h=m?m[0]:r,_={};Object.entries(p).map((function(e){var t=(0,o.Z)(e,2),n=t[0],r=t[1],a=r.val,i=r.param.encode(a);void 0!==i&&(_[n]=i)}));var v=new URLSearchParams(_).toString();return console.log("path: ".concat(r,", searchStr: ").concat(u,", searchObj: "),l,", search: ".concat(v,", query:"),_),(0,i.useEffect)((function(){console.log("router.push:",{pathname:n.pathname,hash:"",search:v}),n.push({pathname:n.pathname,hash:"",search:v},{pathname:h,hash:"",search:v},{shallow:!0,scroll:!1})}),[h,n.pathname,v]),f(d(p).map((function(e){var t=(0,o.Z)(e,2),n=t[0],r=t[1];return[n,[r.val,r.set]]})))}},214:function(e){e.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",footer:"Home_footer____T7K",title:"Home_title__T09hD",description:"Home_description__41Owk",code:"Home_code__suPER",grid:"Home_grid__GxQ85",card:"Home_card___LpL1",logo:"Home_logo__27_tb",homeMap:"Home_homeMap__ZgfiY"}},5152:function(e,t,n){e.exports=n(90638)},9008:function(e,t,n){e.exports=n(5443)},11163:function(e,t,n){e.exports=n(90387)},20943:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},82670:function(e,t,n){"use strict";function r(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}n.d(t,{Z:function(){return r}})},13375:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},828:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(13375);var o=n(91566);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||(0,r.Z)(e,t)||(0,o.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},91566:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(20943);function o(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},function(e){e.O(0,[662,774,888,179],(function(){return t=97434,e(e.s=t);var t}));var t=e.O();_N_E=t}]);