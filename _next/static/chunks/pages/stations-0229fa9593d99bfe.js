(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[319],{4515:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stations",function(){return e(90688)}])},90688:function(t,n,e){"use strict";e.r(n),e.d(n,{__N_SSG:function(){return y},default:function(){return k},ymParam:function(){return j}});var s=e(11527),o=e(55707),a=e(65138);e(83011);var i=e(32699),c=e.n(i),r=e(59220),l=e.n(r),u=e(12133),d=e.n(u),m=e(50959),_=e(10938),f=e.n(_),h=e(46964);let p=l()(()=>Promise.all([e.e(48),e.e(652)]).then(e.bind(e,9652)),{loadableGenerated:{webpack:()=>[9652]},ssr:!1}),g={lat:40.758,lng:-73.965},{entries:w,fromEntries:b,keys:v}=Object;var y=!0;function j(t){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],e=/^20(\d{4})$/,s=/^\d{4}$/;return{encode:n=>{if(n==t)return;let s=n.match(e);if(s)return s[1];console.warn("Invalid ym param: ".concat(n))},decode:n=>n?n.match(s)?"20".concat(n):(console.warn("Invalid ym param value: ".concat(n)),t):t,push:n}}function k(t){let{defaults:n}=t,e={ll:(0,o.GS)({init:g,places:3}),z:(0,o.yc)(12,!1),ss:(0,o.ON)(!1),ym:j(n.ym)},{ll:[i,r],z:[l,u],ss:[_,y],ym:[k]}=(0,a.O5)({params:e}),[x,N]=(0,m.useState)(n.stations),[P,C]=(0,m.useState)(null),{ymString:S}=(0,m.useMemo)(()=>{let t;let e=new Date(parseInt(k.substring(0,4)),parseInt(k.substring(4))-1).toLocaleDateString("default",{month:"short",year:"numeric"}),s="https://ctbk.s3.amazonaws.com/aggregated/".concat(k),o="".concat(s,"/se_c.json"),a="".concat(s,"/stations.json");return k==n.ym?(N(n.stations),console.log("Setting stations to default"),t=Promise.resolve(n.stations)):(console.log("fetching ".concat(a)),t=d()(a).then(t=>t.json()).then(t=>(console.log("got ".concat(w(t).length," stations")),N(t),t))),console.log("fetching ".concat(o)),Promise.all([t,d()(o).then(t=>t.json())]).then(t=>{let[n,e]=t,s=b(v(n).map((t,n)=>[n,t])),o=b(w(e).map(t=>{let[n,e]=t;return[s[n],c().mapKeys(e,(t,n)=>s[n])]}));console.log("got stationPairCounts (".concat(w(o).length," stations)")),C(o)}),{ymString:e}},[k]),E="Citi Bike rides by station, ".concat(S),M={center:i,setCenter:r,zoom:l,setZoom:u,className:f().homeMap,onClick:t=>{console.log("clearing selected station ".concat(_),t),y(void 0)}};return(0,s.jsxs)("div",{className:f().container,children:[(0,s.jsx)(h.Z,{title:E,description:"Map of Citi Bike stations, including ridership counts and frequent destinations",path:"stations",thumbnail:"ctbk-stations"}),(0,s.jsxs)("main",{className:f().main,children:[(0,s.jsx)(p,{mapProps:M,bodyProps:{stations:x,selectedStationId:_,setSelectedStationId:y,stationPairCounts:P}}),E&&(0,s.jsx)("div",{className:f().title,children:E})]})]})}},46964:function(t,n,e){"use strict";e.d(n,{Z:function(){return c}});var s=e(11527),o=e(61361);e(50959);let a="https://ctbk.dev",i="".concat(a,"/screenshots");function c(t){let{title:n,description:e,path:c,thumbnail:r}=t;return(0,s.jsxs)(o.Z,{title:n,description:e,url:"".concat(a,"/").concat(c||""),thumbnail:"".concat(i,"/").concat(r,".png"),children:[(0,s.jsx)("meta",{name:"twitter:card",content:"summary"},"twcard"),(0,s.jsx)("meta",{name:"twitter:creator",content:"RunsAsCoded"},"twhandle"),(0,s.jsx)("meta",{property:"og:site_name",content:"ctbk.dev"},"ogsitename")]})}},83011:function(){},10938:function(t){t.exports={container:"stations_container__Je224",main:"stations_main__YzDFT",title:"stations_title__OP2Iw",homeMap:"stations_homeMap__Bk4CK",selected:"stations_selected__iXlum",circles:"stations_circles__1nSz6",lines:"stations_lines___aq6A",tooltip:"stations_tooltip__RLhgM"}},12133:function(t,n,e){"use strict";var s=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e.g)return e.g;throw Error("unable to locate global object")}();t.exports=n=s.fetch,s.fetch&&(n.default=s.fetch.bind(s)),n.Headers=s.Headers,n.Request=s.Request,n.Response=s.Response}},function(t){t.O(0,[201,756,888,774,179],function(){return t(t.s=4515)}),_N_E=t.O()}]);