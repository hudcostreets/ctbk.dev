(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[319],{52204:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stations",function(){return e(26890)}])},26890:function(t,n,e){"use strict";e.r(n),e.d(n,{__N_SSG:function(){return w},default:function(){return y},ymParam:function(){return v}});var s=e(11527),o=e(38798),a=e(45910);e(74234);var i=e(32699),c=e.n(i),r=e(6293),l=e.n(r),u=e(50959),m=e(58464),d=e.n(m),_=e(45739);let h=l()(()=>Promise.all([e.e(48),e.e(2)]).then(e.bind(e,21002)),{loadableGenerated:{webpack:()=>[21002]},ssr:!1}),p={lat:40.758,lng:-73.965},{entries:f,fromEntries:g,keys:b}=Object;var w=!0;function v(t){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],e=/^20(\d{4})$/,s=/^\d{4}$/;return{encode:n=>{if(n==t)return;let s=n.match(e);if(s)return s[1];console.warn("Invalid ym param: ".concat(n))},decode:n=>n?n.match(s)?"20".concat(n):(console.warn("Invalid ym param value: ".concat(n)),t):t,push:n}}function y(t){let{defaults:n,stationsUrls:e,stationsPairsUrl:i}=t,r={ll:(0,o.GS)({init:p,places:3}),z:(0,o.yc)(12,!1),ss:(0,o.ON)(!1),ym:v(n.ym)},{ll:[l,m],z:[w,y],ss:[j,k],ym:[N]}=(0,a.O5)({params:r}),[x,P]=(0,u.useState)(n.stations),[C,S]=(0,u.useState)(null),{ymString:M}=(0,u.useMemo)(()=>{let t;let s=new Date(parseInt(N.substring(0,4)),parseInt(N.substring(4))-1).toLocaleDateString("default",{month:"short",year:"numeric"}),o=e[N],a=i[N];return N==n.ym?(P(n.stations),console.log("Setting stations to default"),t=Promise.resolve(n.stations)):(console.log("fetching ".concat(o)),t=fetch(o).then(t=>t.json()).then(t=>(console.log("got ".concat(f(t).length," stations")),P(t),t))),console.log("fetching ".concat(a)),Promise.all([t,fetch(a).then(t=>t.json())]).then(t=>{let[n,e]=t,s=g(b(n).map((t,n)=>[n,t])),o=g(f(e).map(t=>{let[n,e]=t;return[s[n],c().mapKeys(e,(t,n)=>s[n])]}));console.log("got stationPairCounts (".concat(f(o).length," stations)")),S(o)}),{ymString:s}},[N]),O="Citi Bike rides by station, ".concat(M),E={center:l,setCenter:m,zoom:w,setZoom:y,className:d().homeMap,onClick:t=>{console.log("clearing selected station ".concat(j),t),k(void 0)}};return(0,s.jsxs)("div",{className:d().container,children:[(0,s.jsx)(_.Z,{title:O,description:"Map of Citi Bike stations, including ridership counts and frequent destinations",path:"stations",thumbnail:"ctbk-stations"}),(0,s.jsxs)("main",{className:d().main,children:[(0,s.jsx)(h,{mapProps:E,bodyProps:{stations:x,selectedStationId:j,setSelectedStationId:k,stationPairCounts:C}}),O&&(0,s.jsx)("div",{className:d().title,children:O})]})]})}},45739:function(t,n,e){"use strict";e.d(n,{Z:function(){return c}});var s=e(11527),o=e(92711);e(50959);let a="https://ctbk.dev",i="".concat(a,"/screenshots");function c(t){let{title:n,description:e,path:c,thumbnail:r}=t;return(0,s.jsxs)(o.Z,{title:n,description:e,url:"".concat(a,"/").concat(c||""),thumbnail:"".concat(i,"/").concat(r,".png"),children:[(0,s.jsx)("meta",{name:"twitter:card",content:"summary"},"twcard"),(0,s.jsx)("meta",{name:"twitter:creator",content:"RunsAsCoded"},"twhandle"),(0,s.jsx)("meta",{property:"og:site_name",content:"ctbk.dev"},"ogsitename")]})}},74234:function(){},58464:function(t){t.exports={container:"stations_container__Je224",main:"stations_main__YzDFT",title:"stations_title__OP2Iw",homeMap:"stations_homeMap__Bk4CK",selected:"stations_selected__iXlum",circles:"stations_circles__1nSz6",lines:"stations_lines___aq6A",tooltip:"stations_tooltip__RLhgM"}}},function(t){t.O(0,[201,235,888,774,179],function(){return t(t.s=52204)}),_N_E=t.O()}]);