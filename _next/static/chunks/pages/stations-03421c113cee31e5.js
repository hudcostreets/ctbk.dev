(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[319],{4515:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stations",function(){return e(90688)}])},90688:function(t,n,e){"use strict";e.r(n),e.d(n,{__N_SSG:function(){return v},default:function(){return j},ymParam:function(){return y}});var s=e(11527),o=e(46964),a=e(55707),i=e(65138),c=e(50959);e(83011);var r=e(10938),l=e.n(r),u=e(12133),d=e.n(u),m=e(32699),_=e.n(m),f=e(59220);let h=e.n(f)()(()=>Promise.all([e.e(48),e.e(652)]).then(e.bind(e,9652)),{loadableGenerated:{webpack:()=>[9652]},ssr:!1}),p={lat:40.758,lng:-73.965},{entries:g,fromEntries:w,keys:b}=Object;var v=!0;function y(t){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],e=/^20(\d{4})$/,s=/^\d{4}$/;return{encode:n=>{if(n==t)return;let s=n.match(e);if(s)return s[1];console.warn("Invalid ym param: ".concat(n))},decode:n=>n?n.match(s)?"20".concat(n):(console.warn("Invalid ym param value: ".concat(n)),t):t,push:n}}function j(t){let{defaults:n}=t,e={ll:(0,a.GS)({init:p,places:3}),z:(0,a.yc)(12,!1),ss:(0,a.ON)(!1),ym:y(n.ym)},{ll:[r,u],z:[m,f],ss:[v,j],ym:[k,x]}=(0,i.O5)({params:e}),[N,P]=(0,c.useState)(n.stations),[C,S]=(0,c.useState)(null),{ymString:E}=(0,c.useMemo)(()=>{let t;let e=new Date(parseInt(k.substring(0,4)),parseInt(k.substring(4))-1).toLocaleDateString("default",{month:"short",year:"numeric"}),s="https://ctbk.s3.amazonaws.com/aggregated/".concat(k),o="".concat(s,"/se_c.json"),a="".concat(s,"/stations.json");return k==n.ym?(P(n.stations),console.log("Setting stations to default"),t=Promise.resolve(n.stations)):(console.log("fetching ".concat(a)),t=d()(a).then(t=>t.json()).then(t=>(console.log("got ".concat(g(t).length," stations")),P(t),t))),console.log("fetching ".concat(o)),Promise.all([t,d()(o).then(t=>t.json())]).then(t=>{let[n,e]=t,s=w(b(n).map((t,n)=>[n,t])),o=w(g(e).map(t=>{let[n,e]=t;return[s[n],_().mapKeys(e,(t,n)=>s[n])]}));console.log("got stationPairCounts (".concat(g(o).length," stations)")),S(o)}),{ymString:e}},[k]),M="Citi Bike rides by station, ".concat(E),O={center:r,setCenter:u,zoom:m,setZoom:f,className:l().homeMap,onClick:t=>{console.log("clearing selected station ".concat(v),t),j(void 0)}};return(0,s.jsxs)("div",{className:l().container,children:[(0,s.jsx)(o.Z,{title:M,description:"Map of Citi Bike stations, including ridership counts and frequent destinations",path:"stations",thumbnail:"ctbk-stations"}),(0,s.jsxs)("main",{className:l().main,children:[(0,s.jsx)(h,{mapProps:O,bodyProps:{stations:N,selectedStationId:v,setSelectedStationId:j,stationPairCounts:C}}),M&&(0,s.jsx)("div",{className:l().title,children:M})]})]})}},46964:function(t,n,e){"use strict";e.d(n,{Z:function(){return c}});var s=e(11527);e(50959);var o=e(61504);let a="https://ctbk.dev",i="".concat(a,"/screenshots");function c(t){let{title:n,description:e,path:c,thumbnail:r}=t;return(0,s.jsxs)(o.Z,{title:n,description:e,url:"".concat(a,"/").concat(c||""),thumbnail:"".concat(i,"/").concat(r,".png"),children:[(0,s.jsx)("meta",{name:"twitter:card",content:"summary"},"twcard"),(0,s.jsx)("meta",{name:"twitter:creator",content:"RunsAsCoded"},"twhandle"),(0,s.jsx)("meta",{property:"og:site_name",content:"ctbk.dev"},"ogsitename")]})}},83011:function(){},10938:function(t){t.exports={container:"stations_container__Je224",main:"stations_main__YzDFT",title:"stations_title__OP2Iw",homeMap:"stations_homeMap__Bk4CK",selected:"stations_selected__iXlum",circles:"stations_circles__1nSz6",lines:"stations_lines___aq6A",tooltip:"stations_tooltip__RLhgM"}},12133:function(t,n,e){"use strict";var s=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e.g)return e.g;throw Error("unable to locate global object")}();t.exports=n=s.fetch,s.fetch&&(n.default=s.fetch.bind(s)),n.Headers=s.Headers,n.Request=s.Request,n.Response=s.Response}},function(t){t.O(0,[201,895,888,774,179],function(){return t(t.s=4515)}),_N_E=t.O()}]);