(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[319],{39981:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stations",function(){return e(35307)}])},35307:function(t,n,e){"use strict";e.r(n),e.d(n,{__N_SSG:function(){return b},default:function(){return y},ymParam:function(){return v}});var s=e(52676),o=e(74858),a=e(68672),i=e(75271);e(82169);var c=e(4644),r=e.n(c),l=e(12133),u=e.n(l),d=e(32699),m=e.n(d),_=e(43738);let f=e.n(_)()(()=>Promise.all([e.e(48),e.e(167)]).then(e.bind(e,89167)),{loadableGenerated:{webpack:()=>[89167]},ssr:!1}),h={lat:40.758,lng:-73.965},{entries:p,fromEntries:g,keys:w}=Object;var b=!0;function v(t){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],e=/^20(\d{4})$/,s=/^\d{4}$/;return{encode:n=>{if(n==t)return;let s=n.match(e);if(s)return s[1];console.warn("Invalid ym param: ".concat(n))},decode:n=>n?n.match(s)?"20".concat(n):(console.warn("Invalid ym param value: ".concat(n)),t):t,push:n}}function y(t){let{defaults:n}=t,e={ll:(0,a.GS)({init:h,places:3}),z:(0,a.yc)(12,!1),ss:(0,a.ON)(!1),ym:v(n.ym)},{ll:[c,l],z:[d,_],ss:[b,y],ym:[j,k]}=(0,a.O5)({params:e}),[x,N]=(0,i.useState)(n.stations),[P,C]=(0,i.useState)(null),{ymString:S}=(0,i.useMemo)(()=>{let t;let e=new Date(parseInt(j.substring(0,4)),parseInt(j.substring(4))-1).toLocaleDateString("default",{month:"short",year:"numeric"}),s="https://ctbk.s3.amazonaws.com/aggregated/".concat(j),o="".concat(s,"/se_c.json"),a="".concat(s,"/stations.json");return j==n.ym?(N(n.stations),console.log("Setting stations to default"),t=Promise.resolve(n.stations)):(console.log("fetching ".concat(a)),t=u()(a).then(t=>t.json()).then(t=>(console.log("got ".concat(p(t).length," stations")),N(t),t))),console.log("fetching ".concat(o)),Promise.all([t,u()(o).then(t=>t.json())]).then(t=>{let[n,e]=t,s=g(w(n).map((t,n)=>[n,t])),o=g(p(e).map(t=>{let[n,e]=t;return[s[n],m().mapKeys(e,(t,n)=>s[n])]}));console.log("got stationPairCounts (".concat(p(o).length," stations)")),C(o)}),{ymString:e}},[j]),E="Citi Bike rides by station, ".concat(S),M={center:c,setCenter:l,zoom:d,setZoom:_,className:r().homeMap,onClick:t=>{console.log("clearing selected station ".concat(b),t),y(void 0)}};return(0,s.jsxs)("div",{className:r().container,children:[(0,s.jsx)(o.Z,{title:E,description:"Map of Citi Bike stations, including ridership counts and frequent destinations",path:"stations",thumbnail:"ctbk-stations"}),(0,s.jsxs)("main",{className:r().main,children:[(0,s.jsx)(f,{mapProps:M,bodyProps:{stations:x,selectedStationId:b,setSelectedStationId:y,stationPairCounts:P}}),E&&(0,s.jsx)("div",{className:r().title,children:E})]})]})}},74858:function(t,n,e){"use strict";e.d(n,{Z:function(){return c}});var s=e(52676);e(75271);var o=e(40402);let a="https://ctbk.dev",i="".concat(a,"/screenshots");function c(t){let{title:n,description:e,path:c,thumbnail:r}=t;return(0,s.jsxs)(o.F,{title:n,description:e,url:"".concat(a,"/").concat(c||""),thumbnail:"".concat(i,"/").concat(r,".png"),children:[(0,s.jsx)("meta",{name:"twitter:card",content:"summary"},"twcard"),(0,s.jsx)("meta",{name:"twitter:creator",content:"RunsAsCoded"},"twhandle"),(0,s.jsx)("meta",{property:"og:site_name",content:"ctbk.dev"},"ogsitename")]})}},4644:function(t){t.exports={container:"stations_container__Je224",main:"stations_main__YzDFT",title:"stations_title__OP2Iw",homeMap:"stations_homeMap__Bk4CK",selected:"stations_selected__iXlum",circles:"stations_circles__1nSz6",lines:"stations_lines___aq6A",tooltip:"stations_tooltip__RLhgM"}},82169:function(){},12133:function(t,n,e){"use strict";var s=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e.g)return e.g;throw Error("unable to locate global object")}();t.exports=n=s.fetch,s.fetch&&(n.default=s.fetch.bind(s)),n.Headers=s.Headers,n.Request=s.Request,n.Response=s.Response}},function(t){t.O(0,[201,545,888,774,179],function(){return t(t.s=39981)}),_N_E=t.O()}]);