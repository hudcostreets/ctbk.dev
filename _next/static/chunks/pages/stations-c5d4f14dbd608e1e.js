(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[319],{33525:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stations",function(){return n(28598)}])},28598:function(t,e,n){"use strict";n.r(e),n.d(e,{MAPS:function(){return w},__N_SSG:function(){return y},default:function(){return j},ymParam:function(){return v}});var o=n(11527),s=n(32320),a=n(80183),i=n(50959);n(55767);var r=n(16244),c=n.n(r),l=n(12133),u=n.n(l),p=n(32699),d=n.n(p),m=n(21006);let h=n.n(m)()(()=>Promise.all([n.e(48),n.e(578)]).then(n.bind(n,79578)),{loadableGenerated:{webpack:()=>[79578]},ssr:!1}),f={lat:40.758,lng:-73.965},{entries:_,fromEntries:g,keys:b}=Object;var y=!0;let w={openstreetmap:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"&copy; <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors"},alidade_smooth_dark:{url:"https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png",attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'}};function v(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=/^20(\d{4})$/,o=/^\d{4}$/;return{encode:e=>{if(e==t)return;let o=e.match(n);if(o)return o[1];console.warn("Invalid ym param: ".concat(e))},decode:e=>e?e.match(o)?"20".concat(e):(console.warn("Invalid ym param value: ".concat(e)),t):t,push:e}}function j(t){let{defaults:e}=t,n={ll:(0,a.GS)({init:f,places:3}),z:(0,a.yc)(12,!1),ss:(0,a.ON)(),ym:v(e.ym)},{ll:[r,l],z:[p,m],ss:[y,w],ym:[j,k]}=(0,a.O5)({params:n}),[x,S]=(0,i.useState)(e.stations),[M,N]=(0,i.useState)(null),{ymString:P}=(0,i.useMemo)(()=>{let t;let n=new Date(parseInt(j.substring(0,4)),parseInt(j.substring(4))-1).toLocaleDateString("default",{month:"short",year:"numeric"}),o="https://ctbk.s3.amazonaws.com/aggregated/".concat(j),s="".concat(o,"/se_c.json"),a="".concat(o,"/stations.json");return j==e.ym?(S(e.stations),console.log("Setting stations to default"),t=Promise.resolve(e.stations)):(console.log("fetching ".concat(a)),t=u()(a).then(t=>t.json()).then(t=>(console.log("got ".concat(_(t).length," stations")),S(t),t))),console.log("fetching ".concat(s)),Promise.all([t,u()(s).then(t=>t.json())]).then(t=>{let[e,n]=t,o=g(b(e).map((t,e)=>[e,t])),s=g(_(n).map(t=>{let[e,n]=t;return[o[e],d().mapKeys(n,(t,e)=>o[e])]}));console.log("got stationPairCounts (".concat(_(s).length," stations)")),N(s)}),{ymString:n}},[j]),O="Citi Bike rides by station, ".concat(P),z={center:r,setCenter:l,zoom:p,setZoom:m,className:c().homeMap};return(0,o.jsxs)("div",{className:c().container,children:[(0,o.jsx)(s.Z,{title:O,description:"Map of Citi Bike stations, including ridership counts and frequent destinations",path:"stations",thumbnail:"ctbk-stations"}),(0,o.jsxs)("main",{className:c().main,children:[(0,o.jsx)(h,{mapProps:z,bodyProps:{stations:x,selectedStationId:y,setSelectedStationId:w,stationPairCounts:M}}),O&&(0,o.jsx)("div",{className:c().title,children:O})]})]})}},32320:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});var o=n(11527);n(50959);var s=n(28425);let a="https://ctbk.dev",i="".concat(a,"/screenshots");function r(t){let{title:e,description:n,path:r,thumbnail:c}=t;return(0,o.jsxs)(s.F,{title:e,description:n,url:"".concat(a,"/").concat(r||""),thumbnail:"".concat(i,"/").concat(c,".png"),children:[(0,o.jsx)("meta",{name:"twitter:card",content:"summary"},"twcard"),(0,o.jsx)("meta",{name:"twitter:creator",content:"RunsAsCoded"},"twhandle"),(0,o.jsx)("meta",{property:"og:site_name",content:"ctbk.dev"},"ogsitename")]})}},55767:function(){},16244:function(t){t.exports={container:"stations_container__Je224",main:"stations_main__YzDFT",title:"stations_title__OP2Iw",homeMap:"stations_homeMap__Bk4CK",selected:"stations_selected__iXlum",circles:"stations_circles__1nSz6",lines:"stations_lines___aq6A",tooltip:"stations_tooltip__RLhgM"}},12133:function(t,e,n){"use strict";var o=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw Error("unable to locate global object")}();t.exports=e=o.fetch,o.fetch&&(e.default=o.fetch.bind(o)),e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response}},function(t){t.O(0,[201,892,888,774,179],function(){return t(t.s=33525)}),_N_E=t.O()}]);