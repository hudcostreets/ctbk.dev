(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[559],{76435:function(e){var t;t=function(){"use strict";var e=function(e,t){for(var r=Object.keys(t),n=0;n<r.length;++n)e[r[n]]=t[r[n]];return e},t=0;function r(e,r){this.id=t++,this.type=e,this.data=r}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}var i={DynamicVariable:r,define:function(e,t){return new r(e,"["+(function e(t){if(0===t.length)return[];var r=t.charAt(0),i=t.charAt(t.length-1);if(t.length>1&&r===i&&('"'===r||"'"===r))return['"'+n(t.substr(1,t.length-2))+'"'];var a=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t);if(a)return e(t.substr(0,a.index)).concat(e(a[1])).concat(e(t.substr(a.index+a[0].length)));var f=t.split(".");if(1===f.length)return['"'+n(t)+'"'];for(var o=[],u=0;u<f.length;++u)o=o.concat(e(f[u]));return o})(t+"").join("][")+"]")},isDynamic:function(e){return"function"==typeof e&&!e._reglType||e instanceof r},unbox:function e(t,n){return"function"==typeof t?new r(0,t):"number"==typeof t||"boolean"==typeof t?new r(5,t):Array.isArray(t)?new r(6,t.map(function(t,r){return e(t,n+"["+r+"]")})):t instanceof r?t:void 0}},a={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},f="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function o(e){return"string"==typeof e?e.split():e}function u(e){return"string"==typeof e?document.querySelector(e):e}function s(e,t){for(var r=Array(e),n=0;n<e;++n)r[n]=t(n);return r}function c(e){var t,r;return t=(e>65535)<<4,e>>>=t,r=(e>255)<<3,e>>>=r,t|=r,r=(e>15)<<2,e>>>=r,t|=r,r=(e>3)<<1,e>>>=r,(t|=r)|e>>1}function l(){var e=s(8,function(){return[]});function t(t){var r=function(e){for(var t=16;t<=268435456;t*=16)if(e<=t)return t;return 0}(t),n=e[c(r)>>2];return n.length>0?n.pop():new ArrayBuffer(r)}function r(t){e[c(t.byteLength)>>2].push(t)}return{alloc:t,free:r,allocType:function(e,r){var n=null;switch(e){case 5120:n=new Int8Array(t(r),0,r);break;case 5121:n=new Uint8Array(t(r),0,r);break;case 5122:n=new Int16Array(t(2*r),0,r);break;case 5123:n=new Uint16Array(t(2*r),0,r);break;case 5124:n=new Int32Array(t(4*r),0,r);break;case 5125:n=new Uint32Array(t(4*r),0,r);break;case 5126:n=new Float32Array(t(4*r),0,r);break;default:return null}return n.length!==r?n.subarray(0,r):n},freeType:function(e){r(e.buffer)}}}var p=l();p.zero=l();var h=function(e,t){var r=1;t.ext_texture_filter_anisotropic&&(r=e.getParameter(34047));var n=1,i=1;t.webgl_draw_buffers&&(n=e.getParameter(34852),i=e.getParameter(36063));var a=!!t.oes_texture_float;if(a){var f=e.createTexture();e.bindTexture(3553,f),e.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var o=e.createFramebuffer();if(e.bindFramebuffer(36160,o),e.framebufferTexture2D(36160,36064,3553,f,0),e.bindTexture(3553,null),36053!==e.checkFramebufferStatus(36160))a=!1;else{e.viewport(0,0,1,1),e.clearColor(1,0,0,1),e.clear(16384);var u=p.allocType(5126,4);e.readPixels(0,0,1,1,6408,5126,u),e.getError()?a=!1:(e.deleteFramebuffer(o),e.deleteTexture(f),a=1===u[0]),p.freeType(u)}}var s="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),c=!0;if(!s){var l=e.createTexture(),h=p.allocType(5121,36);e.activeTexture(33984),e.bindTexture(34067,l),e.texImage2D(34069,0,6408,3,3,0,6408,5121,h),p.freeType(h),e.bindTexture(34067,null),e.deleteTexture(l),c=!e.getError()}return{colorBits:[e.getParameter(3410),e.getParameter(3411),e.getParameter(3412),e.getParameter(3413)],depthBits:e.getParameter(3414),stencilBits:e.getParameter(3415),subpixelBits:e.getParameter(3408),extensions:Object.keys(t).filter(function(e){return!!t[e]}),maxAnisotropic:r,maxDrawbuffers:n,maxColorAttachments:i,pointSizeDims:e.getParameter(33901),lineWidthDims:e.getParameter(33902),maxViewportDims:e.getParameter(3386),maxCombinedTextureUnits:e.getParameter(35661),maxCubeMapSize:e.getParameter(34076),maxRenderbufferSize:e.getParameter(34024),maxTextureUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxAttributes:e.getParameter(34921),maxVertexUniforms:e.getParameter(36347),maxVertexTextureUnits:e.getParameter(35660),maxVaryingVectors:e.getParameter(36348),maxFragmentUniforms:e.getParameter(36349),glsl:e.getParameter(35724),renderer:e.getParameter(7937),vendor:e.getParameter(7936),version:e.getParameter(7938),readFloat:a,npotTextureCube:c}},d=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray};function m(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||d(e.data))}var b=function(e){return Object.keys(e).map(function(t){return e[t]})},v={shape:function(e){for(var t=[],r=e;r.length;r=r[0])t.push(r.length);return t},flatten:function(e,t,r,n){var i=1;if(t.length)for(var a=0;a<t.length;++a)i*=t[a];else i=0;var f=n||p.allocType(r,i);switch(t.length){case 0:break;case 1:!function(e,t,r){for(var n=0;n<t;++n)r[n]=e[n]}(e,t[0],f);break;case 2:!function(e,t,r,n){for(var i=0,a=0;a<t;++a)for(var f=e[a],o=0;o<r;++o)n[i++]=f[o]}(e,t[0],t[1],f);break;case 3:g(e,t[0],t[1],t[2],f,0);break;default:!function e(t,r,n,i,a){for(var f=1,o=n+1;o<r.length;++o)f*=r[o];var u=r[n];if(r.length-n==4){var s=r[n+1],c=r[n+2],l=r[n+3];for(o=0;o<u;++o)g(t[o],s,c,l,i,a),a+=f}else for(o=0;o<u;++o)e(t[o],r,n+1,i,a),a+=f}(e,t,0,f,0)}return f}};function g(e,t,r,n,i,a){for(var f=a,o=0;o<t;++o)for(var u=e[o],s=0;s<r;++s)for(var c=u[s],l=0;l<n;++l)i[f++]=c[l]}var y={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},x={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},w={dynamic:35048,stream:35040,static:35044},A=v.flatten,k=v.shape,O=[];function E(e){return 0|y[Object.prototype.toString.call(e)]}function _(e,t){for(var r=0;r<t.length;++r)e[r]=t[r]}function D(e,t,r,n,i,a,f){for(var o=0,u=0;u<r;++u)for(var s=0;s<n;++s)e[o++]=t[i*u+a*s+f]}O[5120]=1,O[5122]=2,O[5124]=4,O[5121]=1,O[5123]=2,O[5125]=4,O[5126]=4;var T={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},C=new Float32Array(1),S=new Uint32Array(C.buffer);function j(e){for(var t=p.allocType(5123,e.length),r=0;r<e.length;++r)if(isNaN(e[r]))t[r]=65535;else if(e[r]===1/0)t[r]=31744;else if(e[r]===-1/0)t[r]=64512;else{C[0]=e[r];var n=S[0],i=n>>>31<<15,a=(n<<1>>>24)-127,f=n>>13&1023;if(a<-24)t[r]=i;else if(a<-14){var o=-14-a;t[r]=i+(f+1024>>o)}else a>15?t[r]=i+31744:t[r]=i+(a+15<<10)+f}return t}function V(e){return Array.isArray(e)||d(e)}var F=[9984,9986,9985,9987],B=[0,6409,6410,6407,6408],z={};function I(e){return"[object "+e+"]"}z[6409]=z[6406]=z[6402]=1,z[34041]=z[6410]=2,z[6407]=z[35904]=3,z[6408]=z[35906]=4;var P=I("HTMLCanvasElement"),L=I("OffscreenCanvas"),M=I("CanvasRenderingContext2D"),R=I("ImageBitmap"),U=I("HTMLImageElement"),N=I("HTMLVideoElement"),H=Object.keys(y).concat([P,L,M,R,U,N]),W=[];W[5121]=1,W[5126]=4,W[36193]=2,W[5123]=2,W[5125]=4;var Q=[];function q(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function G(e){return!!(Array.isArray(e)&&0!==e.length&&V(e[0]))}function Y(e){return Object.prototype.toString.call(e)}function X(e){if(!e)return!1;var t=Y(e);return H.indexOf(t)>=0||q(e)||G(e)||m(e)}function J(e){return 0|y[Object.prototype.toString.call(e)]}function K(e,t){return p.allocType(36193===e.type?5126:e.type,t)}function Z(e,t){36193===e.type?(e.data=j(t),p.freeType(t)):e.data=t}function $(e,t,r,n,i,a){if(f=void 0!==Q[e]?Q[e]:z[e]*W[t],a&&(f*=6),!i)return f*r*n;for(var f,o=0,u=r;u>=1;)o+=f*u*u,u/=2;return o}Q[32854]=2,Q[32855]=2,Q[36194]=2,Q[34041]=4,Q[33776]=.5,Q[33777]=.5,Q[33778]=1,Q[33779]=1,Q[35986]=.5,Q[35987]=1,Q[34798]=1,Q[35840]=.5,Q[35841]=.25,Q[35842]=.5,Q[35843]=.25,Q[36196]=.5;var ee=[];ee[32854]=2,ee[32855]=2,ee[36194]=2,ee[33189]=2,ee[36168]=1,ee[34041]=4,ee[35907]=4,ee[34836]=16,ee[34842]=8,ee[34843]=6;var et=function(e,t,r,n,i){var a={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};t.ext_srgb&&(a.srgba=35907),t.ext_color_buffer_half_float&&(a.rgba16f=34842,a.rgb16f=34843),t.webgl_color_buffer_float&&(a.rgba32f=34836);var f=[];Object.keys(a).forEach(function(e){f[a[e]]=e});var o=0,u={};function s(e){this.id=o++,this.refCount=1,this.renderbuffer=e,this.format=32854,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function c(t){var r=t.renderbuffer;e.bindRenderbuffer(36161,null),e.deleteRenderbuffer(r),t.renderbuffer=null,t.refCount=0,delete u[t.id],n.renderbufferCount--}return s.prototype.decRef=function(){--this.refCount<=0&&c(this)},i.profile&&(n.getTotalRenderbufferSize=function(){var e=0;return Object.keys(u).forEach(function(t){e+=u[t].stats.size}),e}),{create:function(t,r){var o=new s(e.createRenderbuffer());function c(t,r){var n,u,s,l=0,p=0,h=32854;if("object"==typeof t&&t){if("shape"in t){var d=t.shape;l=0|d[0],p=0|d[1]}else"radius"in t&&(l=p=0|t.radius),"width"in t&&(l=0|t.width),"height"in t&&(p=0|t.height);"format"in t&&(h=a[t.format])}else"number"==typeof t?(l=0|t,p="number"==typeof r?0|r:l):t||(l=p=1);if(l!==o.width||p!==o.height||h!==o.format)return c.width=o.width=l,c.height=o.height=p,o.format=h,e.bindRenderbuffer(36161,o.renderbuffer),e.renderbufferStorage(36161,h,l,p),i.profile&&(o.stats.size=(n=o.format,u=o.width,s=o.height,ee[n]*u*s)),c.format=f[o.format],c}return u[o.id]=o,n.renderbufferCount++,c(t,r),c.resize=function(t,r){var n,a,f,u=0|t,s=0|r||u;return u===o.width&&s===o.height||(c.width=o.width=u,c.height=o.height=s,e.bindRenderbuffer(36161,o.renderbuffer),e.renderbufferStorage(36161,o.format,u,s),i.profile&&(o.stats.size=(n=o.format,a=o.width,f=o.height,ee[n]*a*f))),c},c._reglType="renderbuffer",c._renderbuffer=o,i.profile&&(c.stats=o.stats),c.destroy=function(){o.decRef()},c},clear:function(){b(u).forEach(c)},restore:function(){b(u).forEach(function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,t.renderbuffer),e.renderbufferStorage(36161,t.format,t.width,t.height)}),e.bindRenderbuffer(36161,null)}}},er=[];er[6408]=4,er[6407]=3;var en=[];function ei(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}function ea(e,t){return e>>>t|e<<32-t}en[5121]=1,en[5126]=4,en[36193]=2;var ef=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998];function eo(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function eu(e){return Array.prototype.slice.call(e)}function es(e){return eu(e).join("")}var ec="xyzw".split(""),el="dither",ep="blend.enable",eh="blend.color",ed="blend.equation",em="blend.func",eb="depth.enable",ev="depth.func",eg="depth.range",ey="depth.mask",ex="colorMask",ew="cull.enable",eA="cull.face",ek="frontFace",eO="lineWidth",eE="polygonOffset.enable",e_="polygonOffset.offset",eD="sample.alpha",eT="sample.enable",eC="sample.coverage",eS="stencil.enable",ej="stencil.mask",eV="stencil.func",eF="stencil.opFront",eB="stencil.opBack",ez="scissor.enable",eI="scissor.box",eP="viewport",eL="profile",eM="framebuffer",eR="vert",eU="frag",eN="elements",eH="primitive",eW="count",eQ="offset",eq="instances",eG="Width",eY="Height",eX=eM+eG,eJ=eM+eY,eK=eP+eG,eZ=eP+eY,e$="drawingBuffer",e0=e$+eG,e1=e$+eY,e3=[em,ed,eV,eF,eB,eC,eP,eI,e_],e2={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},e6={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},e5={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},e4={cw:2304,ccw:2305};function e7(e){return Array.isArray(e)||d(e)||m(e)}function e8(e){return e.sort(function(e,t){return e===eP?-1:t===eP?1:e<t?-1:1})}function e9(e,t,r,n){this.thisDep=e,this.contextDep=t,this.propDep=r,this.append=n}function te(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function tt(e){return new e9(!1,!1,!1,e)}function tr(e,t){var r=e.type;if(0===r){var n=e.data.length;return new e9(!0,n>=1,n>=2,t)}if(4===r){var i=e.data;return new e9(i.thisDep,i.contextDep,i.propDep,t)}if(5===r)return new e9(!1,!1,!1,t);if(6!==r)return new e9(3===r,2===r,1===r,t);for(var a=!1,f=!1,o=!1,u=0;u<e.data.length;++u){var s=e.data[u];if(1===s.type)o=!0;else if(2===s.type)f=!0;else if(3===s.type)a=!0;else if(0===s.type){a=!0;var c=s.data;c>=1&&(f=!0),c>=2&&(o=!0)}else 4===s.type&&(a=a||s.data.thisDep,f=f||s.data.contextDep,o=o||s.data.propDep)}return new e9(a,f,o,t)}var tn=new e9(!1,!1,!1,function(){}),ti=function(e,t){if(!t.ext_disjoint_timer_query)return null;var r=[],n=[];function i(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var a=[],f=[];function o(e,t,r){var n=a.pop()||new i;n.startQueryIndex=e,n.endQueryIndex=t,n.sum=0,n.stats=r,f.push(n)}var u=[],s=[];return{beginQuery:function(e){var i=r.pop()||t.ext_disjoint_timer_query.createQueryEXT();t.ext_disjoint_timer_query.beginQueryEXT(35007,i),n.push(i),o(n.length-1,n.length,e)},endQuery:function(){t.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:o,update:function(){var e,i,o=n.length;if(0!==o){s.length=Math.max(s.length,o+1),u.length=Math.max(u.length,o+1),u[0]=0,s[0]=0;var c=0;for(i=0,e=0;i<n.length;++i){var l=n[i];t.ext_disjoint_timer_query.getQueryObjectEXT(l,34919)?(c+=t.ext_disjoint_timer_query.getQueryObjectEXT(l,34918),r.push(l)):n[e++]=l,u[i+1]=c,s[i+1]=e}for(i=0,n.length=e,e=0;i<f.length;++i){var p=f[i],h=p.startQueryIndex,d=p.endQueryIndex;p.sum+=u[d]-u[h];var m=s[h],b=s[d];b===m?(p.stats.gpuTime+=p.sum/1e6,a.push(p)):(p.startQueryIndex=m,p.endQueryIndex=b,f[e++]=p)}f.length=e}},getNumPendingQueries:function(){return n.length},clear:function(){r.push.apply(r,n);for(var e=0;e<r.length;e++)t.ext_disjoint_timer_query.deleteQueryEXT(r[e]);n.length=0,r.length=0},restore:function(){n.length=0,r.length=0}}},ta="webglcontextlost",tf="webglcontextrestored";function to(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return r;return -1}return function(t){var r,n,c=function(t){var r,n,i,a,f=t||{},s={},c=[],l=[],p="undefined"==typeof window?1:window.devicePixelRatio,h=!1,d={},m=function(e){},b=function(){};if("string"==typeof f?r=document.querySelector(f):"object"==typeof f&&("string"==typeof f.nodeName&&"function"==typeof f.appendChild&&"function"==typeof f.getBoundingClientRect?r=f:"function"==typeof f.drawArrays||"function"==typeof f.drawElements?i=(a=f).canvas:("gl"in f?a=f.gl:"canvas"in f?i=u(f.canvas):"container"in f&&(n=u(f.container)),"attributes"in f&&(s=f.attributes),"extensions"in f&&(c=o(f.extensions)),"optionalExtensions"in f&&(l=o(f.optionalExtensions)),"onDone"in f&&(m=f.onDone),"profile"in f&&(h=!!f.profile),"pixelRatio"in f&&(p=+f.pixelRatio),"cachedCode"in f&&(d=f.cachedCode))),r&&("canvas"===r.nodeName.toLowerCase()?i=r:n=r),!a){if(!i){var v=function(t,r,n){var i,a=document.createElement("canvas");function f(){var e=window.innerWidth,r=window.innerHeight;if(t!==document.body){var i=a.getBoundingClientRect();e=i.right-i.left,r=i.bottom-i.top}a.width=n*e,a.height=n*r}return e(a.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),t.appendChild(a),t===document.body&&(a.style.position="absolute",e(t.style,{margin:0,padding:0})),t!==document.body&&"function"==typeof ResizeObserver?(i=new ResizeObserver(function(){setTimeout(f)})).observe(t):window.addEventListener("resize",f,!1),f(),{canvas:a,onDestroy:function(){i?i.disconnect():window.removeEventListener("resize",f),t.removeChild(a)}}}(n||document.body,0,p);if(!v)return null;i=v.canvas,b=v.onDestroy}void 0===s.premultipliedAlpha&&(s.premultipliedAlpha=!0),a=function(e,t){function r(r){try{return e.getContext(r,t)}catch(e){return null}}return r("webgl")||r("experimental-webgl")||r("webgl-experimental")}(i,s)}return a?{gl:a,canvas:i,container:n,extensions:c,optionalExtensions:l,pixelRatio:p,profile:h,cachedCode:d,onDone:m,onDestroy:b}:(b(),m("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(t);if(!c)return null;var l=c.gl,g=l.getContextAttributes(),y=(l.isContextLost(),function(e,t){var r={};function n(t){var n,i=t.toLowerCase();try{n=r[i]=e.getExtension(i)}catch(e){}return!!n}for(var i=0;i<t.extensions.length;++i){var a=t.extensions[i];if(!n(a))return t.onDestroy(),t.onDone('"'+a+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(n),{extensions:r,restore:function(){Object.keys(r).forEach(function(e){if(r[e]&&!n(e))throw Error("(regl): error restoring extension "+e)})}}}(l,c));if(!y)return null;var C=(r={"":0},n=[""],{id:function(e){var t=r[e];return t||(t=r[e]=n.length,n.push(e)),t},str:function(e){return n[e]}}),S={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},I=c.cachedCode||{},H=y.extensions,W=ti(l,H),Q=f(),ee=l.drawingBufferWidth,eG=l.drawingBufferHeight,eY={tick:0,time:0,viewportWidth:ee,viewportHeight:eG,framebufferWidth:ee,framebufferHeight:eG,drawingBufferWidth:ee,drawingBufferHeight:eG,pixelRatio:c.pixelRatio},e$={elements:null,primitive:4,count:-1,offset:0,instances:-1},tu=h(l,H),ts=function(e,t,r,n){var i=0,a={};function f(t){this.id=i++,this.buffer=e.createBuffer(),this.type=t,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,r.profile&&(this.stats={size:0})}f.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},f.prototype.destroy=function(){c(this)};var o=[];function u(t,r,n){t.byteLength=r.byteLength,e.bufferData(t.type,r,n)}function s(e,t,r,n,i,a){if(e.usage=r,Array.isArray(t)){if(e.dtype=n||5126,t.length>0){if(Array.isArray(t[0])){f=k(t);for(var f,o,s=1,c=1;c<f.length;++c)s*=f[c];e.dimension=s,o=A(t,f,e.dtype),u(e,o,r),a?e.persistentData=o:p.freeType(o)}else if("number"==typeof t[0]){e.dimension=i;var l=p.allocType(e.dtype,t.length);_(l,t),u(e,l,r),a?e.persistentData=l:p.freeType(l)}else d(t[0])&&(e.dimension=t[0].length,e.dtype=n||E(t[0])||5126,o=A(t,[t.length,t[0].length],e.dtype),u(e,o,r),a?e.persistentData=o:p.freeType(o))}}else if(d(t))e.dtype=n||E(t),e.dimension=i,u(e,t,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(t.buffer)));else if(m(t)){f=t.shape;var h=t.stride,b=t.offset,v=0,g=0,y=0,x=0;1===f.length?(v=f[0],g=1,y=h[0],x=0):2===f.length&&(v=f[0],g=f[1],y=h[0],x=h[1]),e.dtype=n||E(t.data)||5126,e.dimension=g;var w=p.allocType(e.dtype,v*g);D(w,t.data,v,g,y,x,b),u(e,w,r),a?e.persistentData=w:p.freeType(w)}else t instanceof ArrayBuffer&&(e.dtype=5121,e.dimension=i,u(e,t,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(t))))}function c(r){t.bufferCount--,n(r);var i=r.buffer;e.deleteBuffer(i),r.buffer=null,delete a[r.id]}return r.profile&&(t.getTotalBufferSize=function(){var e=0;return Object.keys(a).forEach(function(t){e+=a[t].stats.size}),e}),{create:function(n,i,o,u){t.bufferCount++;var l=new f(i);function h(t){var n=35044,i=null,a=0,f=0,o=1;return Array.isArray(t)||d(t)||m(t)||t instanceof ArrayBuffer?i=t:"number"==typeof t?a=0|t:t&&("data"in t&&(i=t.data),"usage"in t&&(n=w[t.usage]),"type"in t&&(f=x[t.type]),"dimension"in t&&(o=0|t.dimension),"length"in t&&(a=0|t.length)),l.bind(),i?s(l,i,n,f,o,u):(a&&e.bufferData(l.type,a,n),l.dtype=f||5121,l.usage=n,l.dimension=o,l.byteLength=a),r.profile&&(l.stats.size=l.byteLength*O[l.dtype]),h}function b(t,r){e.bufferSubData(l.type,r,t)}return a[l.id]=l,o||h(n),h._reglType="buffer",h._buffer=l,h.subdata=function(e,t){var r,n=0|(t||0);if(l.bind(),d(e)||e instanceof ArrayBuffer)b(e,n);else if(Array.isArray(e)){if(e.length>0){if("number"==typeof e[0]){var i=p.allocType(l.dtype,e.length);_(i,e),b(i,n),p.freeType(i)}else if(Array.isArray(e[0])||d(e[0])){r=k(e);var a=A(e,r,l.dtype);b(a,n),p.freeType(a)}}}else if(m(e)){r=e.shape;var f=e.stride,o=0,u=0,s=0,c=0;1===r.length?(o=r[0],u=1,s=f[0],c=0):2===r.length&&(o=r[0],u=r[1],s=f[0],c=f[1]);var v=Array.isArray(e.data)?l.dtype:E(e.data),g=p.allocType(v,o*u);D(g,e.data,o,u,s,c,e.offset),b(g,n),p.freeType(g)}return h},r.profile&&(h.stats=l.stats),h.destroy=function(){c(l)},h},createStream:function(e,t){var r=o.pop();return r||(r=new f(e)),r.bind(),s(r,t,35040,0,1,!1),r},destroyStream:function(e){o.push(e)},clear:function(){b(a).forEach(c),o.forEach(c)},getBuffer:function(e){return e&&e._buffer instanceof f?e._buffer:null},restore:function(){b(a).forEach(function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)})},_initBuffer:s}}(l,S,c,function(e){return tl.destroyBuffer(e)}),tc=function(e,t,r,n){var i={},a=0,f={uint8:5121,uint16:5123};function o(e){this.id=a++,i[this.id]=this,this.buffer=e,this.primType=4,this.vertCount=0,this.type=0}t.oes_element_index_uint&&(f.uint32=5125),o.prototype.bind=function(){this.buffer.bind()};var u=[];function s(n,i,a,f,o,u,s){if(n.buffer.bind(),i){var c,l=s;!s&&(!d(i)||m(i)&&!d(i.data))&&(l=t.oes_element_index_uint?5125:5123),r._initBuffer(n.buffer,i,a,l,3)}else e.bufferData(34963,u,a),n.buffer.dtype=c||5121,n.buffer.usage=a,n.buffer.dimension=3,n.buffer.byteLength=u;if(c=s,!s){switch(n.buffer.dtype){case 5121:case 5120:c=5121;break;case 5123:case 5122:c=5123;break;case 5125:case 5124:c=5125}n.buffer.dtype=c}n.type=c;var p=o;p<0&&(p=n.buffer.byteLength,5123===c?p>>=1:5125===c&&(p>>=2)),n.vertCount=p;var h=f;if(f<0){h=4;var b=n.buffer.dimension;1===b&&(h=0),2===b&&(h=1),3===b&&(h=4)}n.primType=h}function c(e){n.elementsCount--,delete i[e.id],e.buffer.destroy(),e.buffer=null}return{create:function(e,t){var i=r.create(null,34963,!0),a=new o(i._buffer);function u(e){if(e){if("number"==typeof e)i(e),a.primType=4,a.vertCount=0|e,a.type=5121;else{var t=null,r=35044,n=-1,o=-1,c=0,l=0;Array.isArray(e)||d(e)||m(e)?t=e:("data"in e&&(t=e.data),"usage"in e&&(r=w[e.usage]),"primitive"in e&&(n=T[e.primitive]),"count"in e&&(o=0|e.count),"type"in e&&(l=f[e.type]),"length"in e?c=0|e.length:(c=o,5123===l||5122===l?c*=2:(5125===l||5124===l)&&(c*=4))),s(a,t,r,n,o,c,l)}}else i(),a.primType=4,a.vertCount=0,a.type=5121;return u}return n.elementsCount++,u(e),u._reglType="elements",u._elements=a,u.subdata=function(e,t){return i.subdata(e,t),u},u.destroy=function(){c(a)},u},createStream:function(e){var t=u.pop();return t||(t=new o(r.create(null,34963,!0,!1)._buffer)),s(t,e,35040,-1,-1,0,0),t},destroyStream:function(e){u.push(e)},getElements:function(e){return"function"==typeof e&&e._elements instanceof o?e._elements:null},clear:function(){b(i).forEach(c)}}}(l,H,ts,S),tl=function(e,t,r,n,i,a,f){for(var o=r.maxAttributes,u=Array(o),s=0;s<o;++s)u[s]=new ei;var c=0,l={},p={Record:ei,scope:{},state:u,currentVAO:null,targetVAO:null,restore:h()?function(){h()&&b(l).forEach(function(e){e.refresh()})}:function(){},createVAO:function(e){var t=new g;function r(e){if(Array.isArray(e))s=e,t.elements&&t.ownsElements&&t.elements.destroy(),t.elements=null,t.ownsElements=!1,t.offset=0,t.count=0,t.instances=-1,t.primitive=4;else{if(e.elements){var n=e.elements;t.ownsElements?("function"==typeof n&&"elements"===n._reglType?t.elements.destroy():t.elements(n),t.ownsElements=!1):a.getElements(e.elements)?(t.elements=e.elements,t.ownsElements=!1):(t.elements=a.create(e.elements),t.ownsElements=!0)}else t.elements=null,t.ownsElements=!1;s=e.attributes,t.offset=0,t.count=-1,t.instances=-1,t.primitive=4,t.elements&&(t.count=t.elements._elements.vertCount,t.primitive=t.elements._elements.primType),"offset"in e&&(t.offset=0|e.offset),"count"in e&&(t.count=0|e.count),"instances"in e&&(t.instances=0|e.instances),"primitive"in e&&(t.primitive=T[e.primitive])}var f={},o=t.attributes;o.length=s.length;for(var u=0;u<s.length;++u){var s,c,l=s[u],p=o[u]=new ei,h=l.data||l;Array.isArray(h)||d(h)||m(h)?(t.buffers[u]&&(c=t.buffers[u],d(h)&&c._buffer.byteLength>=h.byteLength?c.subdata(h):(c.destroy(),t.buffers[u]=null)),t.buffers[u]||(c=t.buffers[u]=i.create(l,34962,!1,!0)),p.buffer=i.getBuffer(c),p.size=0|p.buffer.dimension,p.normalized=!1,p.type=p.buffer.dtype,p.offset=0,p.stride=0,p.divisor=0,p.state=1,f[u]=1):i.getBuffer(l)?(p.buffer=i.getBuffer(l),p.size=0|p.buffer.dimension,p.normalized=!1,p.type=p.buffer.dtype,p.offset=0,p.stride=0,p.divisor=0,p.state=1):i.getBuffer(l.buffer)?(p.buffer=i.getBuffer(l.buffer),p.size=0|(+l.size||p.buffer.dimension),p.normalized=!!l.normalized,"type"in l?p.type=x[l.type]:p.type=p.buffer.dtype,p.offset=0|(l.offset||0),p.stride=0|(l.stride||0),p.divisor=0|(l.divisor||0),p.state=1):"x"in l&&(p.x=+l.x||0,p.y=+l.y||0,p.z=+l.z||0,p.w=+l.w||0,p.state=2)}for(var b=0;b<t.buffers.length;++b)!f[b]&&t.buffers[b]&&(t.buffers[b].destroy(),t.buffers[b]=null);return t.refresh(),r}return n.vaoCount+=1,r.destroy=function(){for(var e=0;e<t.buffers.length;++e)t.buffers[e]&&t.buffers[e].destroy();t.buffers.length=0,t.ownsElements&&(t.elements.destroy(),t.elements=null,t.ownsElements=!1),t.destroy()},r._vao=t,r._reglType="vao",r(e)},getVAO:function(e){return"function"==typeof e&&e._vao?e._vao:null},destroyBuffer:function(t){for(var r=0;r<u.length;++r){var n=u[r];n.buffer===t&&(e.disableVertexAttribArray(r),n.buffer=null)}},setVAO:h()?function(e){if(e!==p.currentVAO){var t=h();e?t.bindVertexArrayOES(e.vao):t.bindVertexArrayOES(null),p.currentVAO=e}}:function(t){if(t!==p.currentVAO){if(t)t.bindAttrs();else{for(var r=v(),n=0;n<u.length;++n){var i=u[n];i.buffer?(e.enableVertexAttribArray(n),i.buffer.bind(),e.vertexAttribPointer(n,i.size,i.type,i.normalized,i.stride,i.offfset),r&&i.divisor&&r.vertexAttribDivisorANGLE(n,i.divisor)):(e.disableVertexAttribArray(n),e.vertexAttrib4f(n,i.x,i.y,i.z,i.w))}f.elements?e.bindBuffer(34963,f.elements.buffer.buffer):e.bindBuffer(34963,null)}p.currentVAO=t}},clear:h()?function(){b(l).forEach(function(e){e.destroy()})}:function(){}};function h(){return t.oes_vertex_array_object}function v(){return t.angle_instanced_arrays}function g(){this.id=++c,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var e=h();e?this.vao=e.createVertexArrayOES():this.vao=null,l[this.id]=this,this.buffers=[]}return g.prototype.bindAttrs=function(){for(var t=v(),r=this.attributes,n=0;n<r.length;++n){var i=r[n];i.buffer?(e.enableVertexAttribArray(n),e.bindBuffer(34962,i.buffer.buffer),e.vertexAttribPointer(n,i.size,i.type,i.normalized,i.stride,i.offset),t&&i.divisor&&t.vertexAttribDivisorANGLE(n,i.divisor)):(e.disableVertexAttribArray(n),e.vertexAttrib4f(n,i.x,i.y,i.z,i.w))}for(var f=r.length;f<o;++f)e.disableVertexAttribArray(f);var u=a.getElements(this.elements);u?e.bindBuffer(34963,u.buffer.buffer):e.bindBuffer(34963,null)},g.prototype.refresh=function(){var e=h();e&&(e.bindVertexArrayOES(this.vao),this.bindAttrs(),p.currentVAO=null,e.bindVertexArrayOES(null))},g.prototype.destroy=function(){if(this.vao){var e=h();this===p.currentVAO&&(p.currentVAO=null,e.bindVertexArrayOES(null)),e.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),l[this.id]&&(delete l[this.id],n.vaoCount-=1)},p}(l,H,tu,S,ts,tc,e$),tp=function(t,r,n,i){var a={},f={};function o(e,t,r,n){this.name=e,this.id=t,this.location=r,this.info=n}function u(e,t){for(var r=0;r<e.length;++r)if(e[r].id===t.id){e[r].location=t.location;return}e.push(t)}function s(e,n,i){var o=35632===e?a:f,u=o[n];if(!u){var s=r.str(n);u=t.createShader(e),t.shaderSource(u,s),t.compileShader(u),o[n]=u}return u}var c={},l=[],p=0;function h(e,t){this.id=p++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,i.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function d(e,n,a){var f,c,l=s(35632,e.fragId),p=s(35633,e.vertId),h=e.program=t.createProgram();if(t.attachShader(h,l),t.attachShader(h,p),a)for(f=0;f<a.length;++f){var d=a[f];t.bindAttribLocation(h,d[0],d[1])}t.linkProgram(h);var m=t.getProgramParameter(h,35718);i.profile&&(e.stats.uniformsCount=m);var b=e.uniforms;for(f=0;f<m;++f)if(c=t.getActiveUniform(h,f)){if(c.size>1)for(var v=0;v<c.size;++v){var g=c.name.replace("[0]","["+v+"]");u(b,new o(g,r.id(g),t.getUniformLocation(h,g),c))}else u(b,new o(c.name,r.id(c.name),t.getUniformLocation(h,c.name),c))}var y=t.getProgramParameter(h,35721);i.profile&&(e.stats.attributesCount=y);var x=e.attributes;for(f=0;f<y;++f)(c=t.getActiveAttrib(h,f))&&u(x,new o(c.name,r.id(c.name),t.getAttribLocation(h,c.name),c))}return i.profile&&(n.getMaxUniformsCount=function(){var e=0;return l.forEach(function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)}),e},n.getMaxAttributesCount=function(){var e=0;return l.forEach(function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)}),e}),{clear:function(){var e=t.deleteShader.bind(t);b(a).forEach(e),a={},b(f).forEach(e),f={},l.forEach(function(e){t.deleteProgram(e.program)}),l.length=0,c={},n.shaderCount=0},program:function(r,i,o,u){var s=c[i];s||(s=c[i]={});var p=s[r];if(p&&(p.refCount++,!u))return p;var m=new h(i,r);return n.shaderCount++,d(m,o,u),p||(s[r]=m),l.push(m),e(m,{destroy:function(){if(m.refCount--,m.refCount<=0){t.deleteProgram(m.program);var e=l.indexOf(m);l.splice(e,1),n.shaderCount--}s[m.vertId].refCount<=0&&(t.deleteShader(f[m.vertId]),delete f[m.vertId],delete c[m.fragId][m.vertId]),Object.keys(c[m.fragId]).length||(t.deleteShader(a[m.fragId]),delete a[m.fragId],delete c[m.fragId])}})},restore:function(){a={},f={};for(var e=0;e<l.length;++e)d(l[e],null,l[e].attributes.map(function(e){return[e.location,e.name]}))},shader:s,frag:-1,vert:-1}}(l,C,S,c),th=function(t,r,n,i,a,f,o){var u={"don't care":4352,"dont care":4352,nice:4354,fast:4353},s={repeat:10497,clamp:33071,mirror:33648},c={nearest:9728,linear:9729},l=e({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},c),h={none:0,browser:37444},g={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},y={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},x={};r.ext_srgb&&(y.srgb=35904,y.srgba=35906),r.oes_texture_float&&(g.float32=g.float=5126),r.oes_texture_half_float&&(g.float16=g["half float"]=36193),r.webgl_depth_texture&&(e(y,{depth:6402,"depth stencil":34041}),e(g,{uint16:5123,uint32:5125,"depth stencil":34042})),r.webgl_compressed_texture_s3tc&&e(x,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),r.webgl_compressed_texture_atc&&e(x,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),r.webgl_compressed_texture_pvrtc&&e(x,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),r.webgl_compressed_texture_etc1&&(x["rgb etc1"]=36196);var w=Array.prototype.slice.call(t.getParameter(34467));Object.keys(x).forEach(function(e){var t=x[e];w.indexOf(t)>=0&&(y[e]=t)});var A=Object.keys(y);n.textureFormats=A;var k=[];Object.keys(y).forEach(function(e){k[y[e]]=e});var O=[];Object.keys(g).forEach(function(e){O[g[e]]=e});var E=[];Object.keys(c).forEach(function(e){E[c[e]]=e});var _=[];Object.keys(l).forEach(function(e){_[l[e]]=e});var D=[];Object.keys(s).forEach(function(e){D[s[e]]=e});var T=A.reduce(function(e,t){var n=y[t];return 6409===n||6406===n||6409===n||6410===n||6402===n||34041===n||r.ext_srgb&&(35904===n||35906===n)?e[n]=n:32855===n||t.indexOf("rgba")>=0?e[n]=6408:e[n]=6407,e},{});function C(){this.internalformat=6408,this.format=6408,this.type=5121,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function S(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function I(e,t){if("object"==typeof t&&t){if("premultiplyAlpha"in t&&(e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(e.flipY=t.flipY),"alignment"in t&&(e.unpackAlignment=t.alignment),"colorSpace"in t&&(e.colorSpace=h[t.colorSpace]),"type"in t){var r=t.type;e.type=g[r]}var n=e.width,i=e.height,a=e.channels,f=!1;"shape"in t?(n=t.shape[0],i=t.shape[1],3===t.shape.length&&(a=t.shape[2],f=!0)):("radius"in t&&(n=i=t.radius),"width"in t&&(n=t.width),"height"in t&&(i=t.height),"channels"in t&&(a=t.channels,f=!0)),e.width=0|n,e.height=0|i,e.channels=0|a;var o=!1;if("format"in t){var u=t.format,s=e.internalformat=y[u];e.format=T[s],u in g&&!("type"in t)&&(e.type=g[u]),u in x&&(e.compressed=!0),o=!0}!f&&o?e.channels=z[e.format]:f&&!o&&e.channels!==B[e.format]&&(e.format=e.internalformat=B[e.channels])}}function H(e){t.pixelStorei(37440,e.flipY),t.pixelStorei(37441,e.premultiplyAlpha),t.pixelStorei(37443,e.colorSpace),t.pixelStorei(3317,e.unpackAlignment)}function W(){C.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Q(e,t){var r=null;if(X(t)?r=t:t&&(I(e,t),"x"in t&&(e.xOffset=0|t.x),"y"in t&&(e.yOffset=0|t.y),X(t.data)&&(r=t.data)),t.copy){var n=a.viewportWidth,i=a.viewportHeight;e.width=e.width||n-e.xOffset,e.height=e.height||i-e.yOffset,e.needsCopy=!0}else if(r){if(d(r))e.channels=e.channels||4,e.data=r,"type"in t||5121!==e.type||(e.type=J(r));else if(q(r))e.channels=e.channels||4,function(e,t){var r=t.length;switch(e.type){case 5121:case 5123:case 5125:case 5126:var n=p.allocType(e.type,r);n.set(t),e.data=n;break;case 36193:e.data=j(t)}}(e,r),e.alignment=1,e.needsFree=!0;else if(m(r)){var f,o,u,s,c,l,h=r.data;Array.isArray(h)||5121!==e.type||(e.type=J(h));var b=r.shape,g=r.stride;3===b.length?(u=b[2],l=g[2]):(u=1,l=1),f=b[0],o=b[1],s=g[0],c=g[1],e.alignment=1,e.width=f,e.height=o,e.channels=u,e.format=e.internalformat=B[u],e.needsFree=!0,function(e,t,r,n,i,a){for(var f=e.width,o=e.height,u=e.channels,s=K(e,f*o*u),c=0,l=0;l<o;++l)for(var p=0;p<f;++p)for(var h=0;h<u;++h)s[c++]=t[r*p+n*l+i*h+a];Z(e,s)}(e,h,s,c,l,r.offset)}else if(Y(r)===P||Y(r)===L||Y(r)===M)Y(r)===P||Y(r)===L?e.element=r:e.element=r.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(Y(r)===R)e.element=r,e.width=r.width,e.height=r.height,e.channels=4;else if(Y(r)===U)e.element=r,e.width=r.naturalWidth,e.height=r.naturalHeight,e.channels=4;else if(Y(r)===N)e.element=r,e.width=r.videoWidth,e.height=r.videoHeight,e.channels=4;else if(G(r)){var y=e.width||r[0].length,x=e.height||r.length,w=e.channels;w=V(r[0][0])?w||r[0][0].length:w||1;for(var A=v.shape(r),k=1,O=0;O<A.length;++O)k*=A[O];var E=K(e,k);v.flatten(r,A,"",E),Z(e,E),e.alignment=1,e.width=y,e.height=x,e.channels=w,e.format=e.internalformat=B[w],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;5126===e.type||e.type}function ee(e,r,n,a,f){var o=e.element,u=e.data,s=e.internalformat,c=e.format,l=e.type,p=e.width,h=e.height;H(e),o?t.texSubImage2D(r,f,n,a,c,l,o):e.compressed?t.compressedTexSubImage2D(r,f,n,a,s,p,h,u):e.needsCopy?(i(),t.copyTexSubImage2D(r,f,n,a,e.xOffset,e.yOffset,p,h)):t.texSubImage2D(r,f,n,a,p,h,c,l,u)}var et=[];function er(){return et.pop()||new W}function en(e){e.needsFree&&p.freeType(e.data),W.call(e),et.push(e)}function ei(){C.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function ea(e,t,r){var n=e.images[0]=er();e.mipmask=1,n.width=e.width=t,n.height=e.height=r,n.channels=e.channels=4}function ef(e,t){var r=null;if(X(t))S(r=e.images[0]=er(),e),Q(r,t),e.mipmask=1;else if(I(e,t),Array.isArray(t.mipmap))for(var n=t.mipmap,i=0;i<n.length;++i)S(r=e.images[i]=er(),e),r.width>>=i,r.height>>=i,Q(r,n[i]),e.mipmask|=1<<i;else S(r=e.images[0]=er(),e),Q(r,t),e.mipmask=1;S(e,e.images[0]),e.compressed&&(33776===e.internalformat||33777===e.internalformat||33778===e.internalformat||e.internalformat)}function eo(e,r){for(var n=e.images,a=0;a<n.length;++a){if(!n[a])return;!function(e,r,n){var a=e.element,f=e.data,o=e.internalformat,u=e.format,s=e.type,c=e.width,l=e.height;H(e),a?t.texImage2D(r,n,u,u,s,a):e.compressed?t.compressedTexImage2D(r,n,o,c,l,0,f):e.needsCopy?(i(),t.copyTexImage2D(r,n,u,e.xOffset,e.yOffset,c,l,0)):t.texImage2D(r,n,u,c,l,0,u,s,f||null)}(n[a],r,a)}}var eu=[];function es(){var e=eu.pop()||new ei;C.call(e),e.mipmask=0;for(var t=0;t<16;++t)e.images[t]=null;return e}function ec(e){for(var t=e.images,r=0;r<t.length;++r)t[r]&&en(t[r]),t[r]=null;eu.push(e)}function el(){this.minFilter=9728,this.magFilter=9728,this.wrapS=33071,this.wrapT=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function ep(e,t){if("min"in t){var r=t.min;e.minFilter=l[r],!(F.indexOf(e.minFilter)>=0)||"faces"in t||(e.genMipmaps=!0)}if("mag"in t){var n=t.mag;e.magFilter=c[n]}var i=e.wrapS,a=e.wrapT;if("wrap"in t){var f=t.wrap;"string"==typeof f?i=a=s[f]:Array.isArray(f)&&(i=s[f[0]],a=s[f[1]])}else"wrapS"in t&&(i=s[t.wrapS]),"wrapT"in t&&(a=s[t.wrapT]);if(e.wrapS=i,e.wrapT=a,"anisotropic"in t&&(t.anisotropic,e.anisotropic=t.anisotropic),"mipmap"in t){var o=!1;switch(typeof t.mipmap){case"string":e.mipmapHint=u[t.mipmap],e.genMipmaps=!0,o=!0;break;case"boolean":o=e.genMipmaps=t.mipmap;break;case"object":e.genMipmaps=!1,o=!0}!o||"min"in t||(e.minFilter=9984)}}function eh(e,n){t.texParameteri(n,10241,e.minFilter),t.texParameteri(n,10240,e.magFilter),t.texParameteri(n,10242,e.wrapS),t.texParameteri(n,10243,e.wrapT),r.ext_texture_filter_anisotropic&&t.texParameteri(n,34046,e.anisotropic),e.genMipmaps&&(t.hint(33170,e.mipmapHint),t.generateMipmap(n))}var ed=0,em={},eb=n.maxTextureUnits,ev=Array(eb).map(function(){return null});function eg(e){C.call(this),this.mipmask=0,this.internalformat=6408,this.id=ed++,this.refCount=1,this.target=e,this.texture=t.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new el,o.profile&&(this.stats={size:0})}function ey(e){t.activeTexture(33984),t.bindTexture(e.target,e.texture)}function ex(){var e=ev[0];e?t.bindTexture(e.target,e.texture):t.bindTexture(3553,null)}function ew(e){var r=e.texture,n=e.unit,i=e.target;n>=0&&(t.activeTexture(33984+n),t.bindTexture(i,null),ev[n]=null),t.deleteTexture(r),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete em[e.id],f.textureCount--}return e(eg.prototype,{bind:function(){this.bindCount+=1;var e=this.unit;if(e<0){for(var r=0;r<eb;++r){var n=ev[r];if(n){if(n.bindCount>0)continue;n.unit=-1}ev[r]=this,e=r;break}o.profile&&f.maxTextureUnits<e+1&&(f.maxTextureUnits=e+1),this.unit=e,t.activeTexture(33984+e),t.bindTexture(this.target,this.texture)}return e},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&ew(this)}}),o.profile&&(f.getTotalTextureSize=function(){var e=0;return Object.keys(em).forEach(function(t){e+=em[t].stats.size}),e}),{create2D:function(e,r){var n=new eg(3553);function i(e,t){var r=n.texInfo;el.call(r);var a=es();return"number"==typeof e?"number"==typeof t?ea(a,0|e,0|t):ea(a,0|e,0|e):e?(ep(r,e),ef(a,e)):ea(a,1,1),r.genMipmaps&&(a.mipmask=(a.width<<1)-1),n.mipmask=a.mipmask,S(n,a),n.internalformat=a.internalformat,i.width=a.width,i.height=a.height,ey(n),eo(a,3553),eh(r,3553),ex(),ec(a),o.profile&&(n.stats.size=$(n.internalformat,n.type,a.width,a.height,r.genMipmaps,!1)),i.format=k[n.internalformat],i.type=O[n.type],i.mag=E[r.magFilter],i.min=_[r.minFilter],i.wrapS=D[r.wrapS],i.wrapT=D[r.wrapT],i}return em[n.id]=n,f.textureCount++,i(e,r),i.subimage=function(e,t,r,a){var f=0|t,o=0|r,u=0|a,s=er();return S(s,n),s.width=0,s.height=0,Q(s,e),s.width=s.width||(n.width>>u)-f,s.height=s.height||(n.height>>u)-o,ey(n),ee(s,3553,f,o,u),ex(),en(s),i},i.resize=function(e,r){var a=0|e,f=0|r||a;if(a===n.width&&f===n.height)return i;i.width=n.width=a,i.height=n.height=f,ey(n);for(var u=0;n.mipmask>>u;++u){var s=a>>u,c=f>>u;if(!s||!c)break;t.texImage2D(3553,u,n.format,s,c,0,n.format,n.type,null)}return ex(),o.profile&&(n.stats.size=$(n.internalformat,n.type,a,f,!1,!1)),i},i._reglType="texture2d",i._texture=n,o.profile&&(i.stats=n.stats),i.destroy=function(){n.decRef()},i},createCube:function(e,r,n,i,a,u){var s=new eg(34067);em[s.id]=s,f.cubeCount++;var c=Array(6);function l(e,t,r,n,i,a){var f,u=s.texInfo;for(el.call(u),f=0;f<6;++f)c[f]=es();if("number"!=typeof e&&e){if("object"==typeof e){if(t)ef(c[0],e),ef(c[1],t),ef(c[2],r),ef(c[3],n),ef(c[4],i),ef(c[5],a);else if(ep(u,e),I(s,e),"faces"in e){var p=e.faces;for(f=0;f<6;++f)S(c[f],s),ef(c[f],p[f])}else for(f=0;f<6;++f)ef(c[f],e)}}else{var h=0|e||1;for(f=0;f<6;++f)ea(c[f],h,h)}for(S(s,c[0]),u.genMipmaps?s.mipmask=(c[0].width<<1)-1:s.mipmask=c[0].mipmask,s.internalformat=c[0].internalformat,l.width=c[0].width,l.height=c[0].height,ey(s),f=0;f<6;++f)eo(c[f],34069+f);for(eh(u,34067),ex(),o.profile&&(s.stats.size=$(s.internalformat,s.type,l.width,l.height,u.genMipmaps,!0)),l.format=k[s.internalformat],l.type=O[s.type],l.mag=E[u.magFilter],l.min=_[u.minFilter],l.wrapS=D[u.wrapS],l.wrapT=D[u.wrapT],f=0;f<6;++f)ec(c[f]);return l}return l(e,r,n,i,a,u),l.subimage=function(e,t,r,n,i){var a=0|r,f=0|n,o=0|i,u=er();return S(u,s),u.width=0,u.height=0,Q(u,t),u.width=u.width||(s.width>>o)-a,u.height=u.height||(s.height>>o)-f,ey(s),ee(u,34069+e,a,f,o),ex(),en(u),l},l.resize=function(e){var r=0|e;if(r!==s.width){l.width=s.width=r,l.height=s.height=r,ey(s);for(var n=0;n<6;++n)for(var i=0;s.mipmask>>i;++i)t.texImage2D(34069+n,i,s.format,r>>i,r>>i,0,s.format,s.type,null);return ex(),o.profile&&(s.stats.size=$(s.internalformat,s.type,l.width,l.height,!1,!0)),l}},l._reglType="textureCube",l._texture=s,o.profile&&(l.stats=s.stats),l.destroy=function(){s.decRef()},l},clear:function(){for(var e=0;e<eb;++e)t.activeTexture(33984+e),t.bindTexture(3553,null),ev[e]=null;b(em).forEach(ew),f.cubeCount=0,f.textureCount=0},getTexture:function(e){return null},restore:function(){for(var e=0;e<eb;++e){var r=ev[e];r&&(r.bindCount=0,r.unit=-1,ev[e]=null)}b(em).forEach(function(e){e.texture=t.createTexture(),t.bindTexture(e.target,e.texture);for(var r=0;r<32;++r)if((e.mipmask&1<<r)!=0){if(3553===e.target)t.texImage2D(3553,r,e.internalformat,e.width>>r,e.height>>r,0,e.internalformat,e.type,null);else for(var n=0;n<6;++n)t.texImage2D(34069+n,r,e.internalformat,e.width>>r,e.height>>r,0,e.internalformat,e.type,null)}eh(e.texInfo,e.target)})},refresh:function(){for(var e=0;e<eb;++e){var r=ev[e];r&&(r.bindCount=0,r.unit=-1,ev[e]=null),t.activeTexture(33984+e),t.bindTexture(3553,null),t.bindTexture(34067,null)}}}}(l,H,tu,function(){tb.procs.poll()},eY,S,c),td=et(l,H,tu,S,c),tm=function(t,r,n,i,a,f){var o={cur:null,next:null,dirty:!1,setFBO:null},u=["rgba"],s=["rgba4","rgb565","rgb5 a1"];r.ext_srgb&&s.push("srgba"),r.ext_color_buffer_half_float&&s.push("rgba16f","rgb16f"),r.webgl_color_buffer_float&&s.push("rgba32f");var c=["uint8"];function l(e,t,r){this.target=e,this.texture=t,this.renderbuffer=r;var n=0,i=0;t?(n=t.width,i=t.height):r&&(n=r.width,i=r.height),this.width=n,this.height=i}function p(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function h(e,t,r){if(e){if(e.texture){var n=e.texture._texture;n.width,n.height,n.refCount+=1}else{var i=e.renderbuffer._renderbuffer;i.refCount+=1}}}function d(e,r){r&&(r.texture?t.framebufferTexture2D(36160,e,r.target,r.texture._texture.texture,0):t.framebufferRenderbuffer(36160,e,36161,r.renderbuffer._renderbuffer.renderbuffer))}function m(e){var t=3553,r=null,n=null,i=e;"object"==typeof e&&(i=e.data,"target"in e&&(t=0|e.target));var a=i._reglType;return"texture2d"===a?r=i:"textureCube"===a?r=i:"renderbuffer"===a&&(n=i,t=36161),new l(t,r,n)}function v(e,t,r,n,f){if(r){var o=i.create2D({width:e,height:t,format:n,type:f});return o._texture.refCount=0,new l(3553,o,null)}var u=a.create({width:e,height:t,format:n});return u._renderbuffer.refCount=0,new l(36161,null,u)}function g(e){return e&&(e.texture||e.renderbuffer)}function y(e,t,r){e&&(e.texture?e.texture.resize(t,r):e.renderbuffer&&e.renderbuffer.resize(t,r),e.width=t,e.height=r)}r.oes_texture_half_float&&c.push("half float","float16"),r.oes_texture_float&&c.push("float","float32");var x=0,w={};function A(){this.id=x++,w[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function k(e){e.colorAttachments.forEach(p),p(e.depthAttachment),p(e.stencilAttachment),p(e.depthStencilAttachment)}function O(e){var r=e.framebuffer;t.deleteFramebuffer(r),e.framebuffer=null,f.framebufferCount--,delete w[e.id]}function E(e){t.bindFramebuffer(36160,e.framebuffer);var r,i=e.colorAttachments;for(r=0;r<i.length;++r)d(36064+r,i[r]);for(r=i.length;r<n.maxColorAttachments;++r)t.framebufferTexture2D(36160,36064+r,3553,null,0);t.framebufferTexture2D(36160,33306,3553,null,0),t.framebufferTexture2D(36160,36096,3553,null,0),t.framebufferTexture2D(36160,36128,3553,null,0),d(36096,e.depthAttachment),d(36128,e.stencilAttachment),d(33306,e.depthStencilAttachment),t.checkFramebufferStatus(36160),t.isContextLost(),t.bindFramebuffer(36160,o.next?o.next.framebuffer:null),o.cur=o.next,t.getError()}function _(t,r){var n=new A;function i(e,t){var r,a=0,f=0,o=!0,c=!0,l=null,p=!0,d="rgba",b="uint8",y=1,x=null,w=null,A=null,O=!1;if("number"==typeof e)a=0|e,f=0|t||a;else if(e){if("shape"in e){var _=e.shape;a=_[0],f=_[1]}else"radius"in e&&(a=f=e.radius),"width"in e&&(a=e.width),"height"in e&&(f=e.height);("color"in e||"colors"in e)&&Array.isArray(l=e.color||e.colors),!l&&("colorCount"in e&&(y=0|e.colorCount),"colorTexture"in e&&(p=!!e.colorTexture,d="rgba4"),"colorType"in e&&(b=e.colorType,p||("half float"===b||"float16"===b?d="rgba16f":"float"!==b&&"float32"!==b||(d="rgba32f"))),"colorFormat"in e&&(d=e.colorFormat,u.indexOf(d)>=0?p=!0:s.indexOf(d)>=0&&(p=!1))),("depthTexture"in e||"depthStencilTexture"in e)&&(O=!!(e.depthTexture||e.depthStencilTexture)),"depth"in e&&("boolean"==typeof e.depth?o=e.depth:(x=e.depth,c=!1)),"stencil"in e&&("boolean"==typeof e.stencil?c=e.stencil:(w=e.stencil,o=!1)),"depthStencil"in e&&("boolean"==typeof e.depthStencil?o=c=e.depthStencil:(A=e.depthStencil,o=!1,c=!1))}else a=f=1;var D=null,T=null,C=null,S=null;if(Array.isArray(l))D=l.map(m);else if(l)D=[m(l)];else for(r=0,D=Array(y);r<y;++r)D[r]=v(a,f,p,d,b);a=a||D[0].width,f=f||D[0].height,x?T=m(x):o&&!c&&(T=v(a,f,O,"depth","uint32")),w?C=m(w):c&&!o&&(C=v(a,f,!1,"stencil","uint8")),A?S=m(A):!x&&!w&&c&&o&&(S=v(a,f,O,"depth stencil","depth stencil"));var j=null;for(r=0;r<D.length;++r)if(h(D[r],a,f),D[r]&&D[r].texture){var V=er[D[r].texture._texture.format]*en[D[r].texture._texture.type];null===j&&(j=V)}return h(T,a,f),h(C,a,f),h(S,a,f),k(n),n.width=a,n.height=f,n.colorAttachments=D,n.depthAttachment=T,n.stencilAttachment=C,n.depthStencilAttachment=S,i.color=D.map(g),i.depth=g(T),i.stencil=g(C),i.depthStencil=g(S),i.width=n.width,i.height=n.height,E(n),i}return f.framebufferCount++,i(t,r),e(i,{resize:function(e,t){var r=Math.max(0|e,1),a=Math.max(0|t||r,1);if(r===n.width&&a===n.height)return i;for(var f=n.colorAttachments,o=0;o<f.length;++o)y(f[o],r,a);return y(n.depthAttachment,r,a),y(n.stencilAttachment,r,a),y(n.depthStencilAttachment,r,a),n.width=i.width=r,n.height=i.height=a,E(n),i},_reglType:"framebuffer",_framebuffer:n,destroy:function(){O(n),k(n)},use:function(e){o.setFBO({framebuffer:i},e)}})}return e(o,{getFramebuffer:function(e){if("function"==typeof e&&"framebuffer"===e._reglType){var t=e._framebuffer;if(t instanceof A)return t}return null},create:_,createCube:function(t){var r=Array(6);function n(t){var a,f,o={color:null},u=0,s=null,c="rgba",l="uint8",p=1;if("number"==typeof t?u=0|t:t?("shape"in t?u=t.shape[0]:("radius"in t&&(u=0|t.radius),"width"in t?u=0|t.width:"height"in t&&(u=0|t.height)),("color"in t||"colors"in t)&&Array.isArray(s=t.color||t.colors),!s&&("colorCount"in t&&(p=0|t.colorCount),"colorType"in t&&(l=t.colorType),"colorFormat"in t&&(c=t.colorFormat)),"depth"in t&&(o.depth=t.depth),"stencil"in t&&(o.stencil=t.stencil),"depthStencil"in t&&(o.depthStencil=t.depthStencil)):u=1,s){if(Array.isArray(s))for(a=0,f=[];a<s.length;++a)f[a]=s[a];else f=[s]}else{f=Array(p);var h={radius:u,format:c,type:l};for(a=0;a<p;++a)f[a]=i.createCube(h)}for(a=0,o.color=Array(f.length);a<f.length;++a){var d=f[a];u=u||d.width,o.color[a]={target:34069,data:f[a]}}for(a=0;a<6;++a){for(var m=0;m<f.length;++m)o.color[m].target=34069+a;a>0&&(o.depth=r[0].depth,o.stencil=r[0].stencil,o.depthStencil=r[0].depthStencil),r[a]?r[a](o):r[a]=_(o)}return e(n,{width:u,height:u,color:f})}return n(t),e(n,{faces:r,resize:function(e){var t,i=0|e;if(i===n.width)return n;var a=n.color;for(t=0;t<a.length;++t)a[t].resize(i);for(t=0;t<6;++t)r[t].resize(i);return n.width=n.height=i,n},_reglType:"framebufferCube",destroy:function(){r.forEach(function(e){e.destroy()})}})},clear:function(){b(w).forEach(O)},restore:function(){o.cur=null,o.next=null,o.dirty=!0,b(w).forEach(function(e){e.framebuffer=t.createFramebuffer(),E(e)})}})}(l,H,tu,th,td,S),tb=function(t,r,n,a,f,o,u,c,l,p,h,d,m,b,v,g){var y,w,A,k,O,E,_,D,C,S,j,F,B,z=p.Record,I={add:32774,subtract:32778,"reverse subtract":32779};n.ext_blend_minmax&&(I.min=32775,I.max=32776);var P=n.angle_instanced_arrays,L=n.webgl_draw_buffers,M=n.oes_vertex_array_object,R={dirty:!0,profile:g.profile},U={},N=[],H={},W={};function Q(e){return e.replace(".","_")}function q(e,t,r){var n=Q(e);N.push(e),U[n]=R[n]=!!r,H[n]=t}function G(e,t,r){var n=Q(e);N.push(e),Array.isArray(r)?(R[n]=r.slice(),U[n]=r.slice()):R[n]=U[n]=r,W[n]=t}function Y(e){return!!isNaN(e)}q(el,3024),q(ep,3042),G(eh,"blendColor",[0,0,0,0]),G(ed,"blendEquationSeparate",[32774,32774]),G(em,"blendFuncSeparate",[1,0,1,0]),q(eb,2929,!0),G(ev,"depthFunc",513),G(eg,"depthRange",[0,1]),G(ey,"depthMask",!0),G(ex,ex,[!0,!0,!0,!0]),q(ew,2884),G(eA,"cullFace",1029),G(ek,ek,2305),G(eO,eO,1),q(eE,32823),G(e_,"polygonOffset",[0,0]),q(eD,32926),q(eT,32928),G(eC,"sampleCoverage",[1,!1]),q(eS,2960),G(ej,"stencilMask",-1),G(eV,"stencilFunc",[519,0,-1]),G(eF,"stencilOpSeparate",[1028,7680,7680,7680]),G(eB,"stencilOpSeparate",[1029,7680,7680,7680]),q(ez,3089),G(eI,"scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),G(eP,eP,[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var X={gl:t,context:m,strings:r,next:U,current:R,draw:d,elements:o,buffer:f,shader:h,attributes:p.state,vao:p,uniforms:l,framebuffer:c,extensions:n,timer:b,isBufferArgs:e7},J={primTypes:T,compareFuncs:e6,blendFuncs:e2,blendEquations:I,stencilOps:e5,glTypes:x,orientationType:e4};L&&(J.backBuffer=[1029],J.drawBuffer=s(a.maxDrawbuffers,function(e){return 0===e?[0]:s(e,function(e){return 36064+e})}));var K=0;function Z(){var t=function(t){var r=t&&t.cache,n=0,i=[],a=[],f=[];function o(){var t=[],r=[];return e(function(){t.push.apply(t,eu(arguments))},{def:function(){var e="v"+n++;return r.push(e),arguments.length>0&&(t.push(e,"="),t.push.apply(t,eu(arguments)),t.push(";")),e},toString:function(){return es([r.length>0?"var "+r.join(",")+";":"",es(t)])}})}function u(){var t=o(),r=o(),n=t.toString,i=r.toString;function a(e,n){r(e,n,"=",t.def(e,n),";")}return e(function(){t.apply(t,eu(arguments))},{def:t.def,entry:t,exit:r,save:a,set:function(e,r,n){a(e,r),t(e,r,"=",n,";")},toString:function(){return n()+i()}})}var s=o(),c={};return{global:s,link:function(e,t){var r=t&&t.stable;if(!r){for(var o=0;o<a.length;++o)if(a[o]===e&&!f[o])return i[o]}var u="g"+n++;return i.push(u),a.push(e),f.push(r),u},block:o,proc:function(t,r){var n=[];function i(){var e="a"+n.length;return n.push(e),e}r=r||0;for(var a=0;a<r;++a)i();var f=u(),o=f.toString;return c[t]=e(f,{arg:i,toString:function(){return es(["function(",n.join(),"){",o(),"}"])}})},scope:u,cond:function(){var t=es(arguments),r=u(),n=u(),i=r.toString,a=n.toString;return e(r,{then:function(){return r.apply(r,eu(arguments)),this},else:function(){return n.apply(n,eu(arguments)),this},toString:function(){var e=a();return e&&(e="else{"+e+"}"),es(["if(",t,"){",i(),"}",e])}})},compile:function(){var e,t,n=['"use strict";',s,"return {"];Object.keys(c).forEach(function(e){n.push('"',e,'":',c[e].toString(),",")}),n.push("}");var f=es(n).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");if(r&&r[t=function(e){for(var t,r="0123456789abcdef",n="",i=0;i<e.length;i++)n+=r.charAt((t=e.charCodeAt(i))>>>4&15)+r.charAt(15&t);return n}(function(e){for(var t="",r=0;r<32*e.length;r+=8)t+=String.fromCharCode(e[r>>5]>>>24-r%32&255);return t}(function(e,t){var r,n,i,a,f,o,u,s,c,l,p,h,d,m,b,v,g,y,x,w,A=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],k=Array(64);for(e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t,g=0;g<e.length;g+=16){for(y=0,c=A[0],l=A[1],p=A[2],h=A[3],d=A[4],m=A[5],b=A[6],v=A[7];y<64;y++)y<16?k[y]=e[y+g]:k[y]=eo(eo(eo(ea(r=k[y-2],17)^ea(r,19)^r>>>10,k[y-7]),ea(n=k[y-15],7)^ea(n,18)^n>>>3),k[y-16]),x=eo(eo(eo(eo(v,ea(i=d,6)^ea(i,11)^ea(i,25)),(a=d)&m^~a&b),ef[y]),k[y]),w=eo(ea(f=c,2)^ea(f,13)^ea(f,22),(o=c)&(u=l)^o&(s=p)^u&s),v=b,b=m,m=d,d=eo(h,x),h=p,p=l,l=c,c=eo(x,w);A[0]=eo(c,A[0]),A[1]=eo(l,A[1]),A[2]=eo(p,A[2]),A[3]=eo(h,A[3]),A[4]=eo(d,A[4]),A[5]=eo(m,A[5]),A[6]=eo(b,A[6]),A[7]=eo(v,A[7])}return A}(function(e){for(var t=Array(e.length>>2),r=0;r<t.length;r++)t[r]=0;for(var r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<24-r%32;return t}(e=function(e){for(var t,r,n="",i=-1;++i<e.length;)t=e.charCodeAt(i),r=i+1<e.length?e.charCodeAt(i+1):0,55296<=t&&t<=56319&&56320<=r&&r<=57343&&(t=65536+((1023&t)<<10)+(1023&r),i++),t<=127?n+=String.fromCharCode(t):t<=2047?n+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n}(f)),8*e.length)))])return r[t].apply(null,a);var o=Function.apply(null,i.concat(f));return r&&(r[t]=o),o.apply(null,a)}}}({cache:v}),n=t.link,i=t.global;t.id=K++,t.batchId="0";var a=n(X),f=t.shared={props:"a0"};Object.keys(X).forEach(function(e){f[e]=i.def(a,".",e)});var o=t.next={},u=t.current={};Object.keys(W).forEach(function(e){Array.isArray(R[e])&&(o[e]=i.def(f.next,".",e),u[e]=i.def(f.current,".",e))});var s=t.constants={};Object.keys(J).forEach(function(e){s[e]=i.def(JSON.stringify(J[e]))}),t.invoke=function(e,r){switch(r.type){case 0:var i=["this",f.context,f.props,t.batchId];return e.def(n(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case 1:return e.def(f.props,r.data);case 2:return e.def(f.context,r.data);case 3:return e.def("this",r.data);case 4:return r.data.append(t,e),r.data.ref;case 5:return r.data.toString();case 6:return r.data.map(function(r){return t.invoke(e,r)})}},t.attribCache={};var c={};return t.scopeAttrib=function(e){var t=r.id(e);if(t in c)return c[t];var i=p.scope[t];return i||(i=p.scope[t]=new z),c[t]=n(i)},t}function $(e,t,r){var n=e.shared.context,i=e.scope();Object.keys(r).forEach(function(a){t.save(n,"."+a);var f=r[a].append(e,t);Array.isArray(f)?i(n,".",a,"=[",f.join(),"];"):i(n,".",a,"=",f,";")}),t(i)}function ee(e,t,r,n){var i,a,f=e.shared,o=f.gl,u=f.framebuffer;L&&(i=t.def(f.extensions,".webgl_draw_buffers"));var s=e.constants,c=s.drawBuffer,l=s.backBuffer;a=r?r.append(e,t):t.def(u,".next"),n||t("if(",a,"!==",u,".cur){"),t("if(",a,"){",o,".bindFramebuffer(",36160,",",a,".framebuffer);"),L&&t(i,".drawBuffersWEBGL(",c,"[",a,".colorAttachments.length]);"),t("}else{",o,".bindFramebuffer(",36160,",null);"),L&&t(i,".drawBuffersWEBGL(",l,");"),t("}",u,".cur=",a,";"),n||t("}")}function et(e,t,r){var n=e.shared,i=n.gl,a=e.current,f=e.next,o=n.current,u=n.next,c=e.cond(o,".dirty");N.forEach(function(t){var n,l,p=Q(t);if(!(p in r.state)){if(p in f){n=f[p],l=a[p];var h=s(R[p].length,function(e){return c.def(n,"[",e,"]")});c(e.cond(h.map(function(e,t){return e+"!=="+l+"["+t+"]"}).join("||")).then(i,".",W[p],"(",h,");",h.map(function(e,t){return l+"["+t+"]="+e}).join(";"),";"))}else{n=c.def(u,".",p);var d=e.cond(n,"!==",o,".",p);c(d),p in H?d(e.cond(n).then(i,".enable(",H[p],");").else(i,".disable(",H[p],");"),o,".",p,"=",n,";"):d(i,".",W[p],"(",n,");",o,".",p,"=",n,";")}}}),0===Object.keys(r.state).length&&c(o,".dirty=false;"),t(c)}function er(e,t,r,n){var i,a=e.shared,f=e.current,o=a.current,u=a.gl;e8(Object.keys(r)).forEach(function(a){var s=r[a];if(!n||n(s)){var c=s.append(e,t);if(H[a]){var l=H[a];te(s)?(i=e.link(c,{stable:!0}),t(e.cond(i).then(u,".enable(",l,");").else(u,".disable(",l,");")),t(o,".",a,"=",i,";")):(t(e.cond(c).then(u,".enable(",l,");").else(u,".disable(",l,");")),t(o,".",a,"=",c,";"))}else if(V(c)){var p=f[a];t(u,".",W[a],"(",c,");",c.map(function(e,t){return p+"["+t+"]="+e}).join(";"),";")}else te(s)?(i=e.link(c,{stable:!0}),t(u,".",W[a],"(",i,");",o,".",a,"=",i,";")):t(u,".",W[a],"(",c,");",o,".",a,"=",c,";")}})}function en(e,t){P&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function ei(e,t,r,n,i){var a,f,o,u=e.shared,s=e.stats,c=u.current,l=u.timer,p=r.profile;function h(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function d(e){e(a=t.def(),"=",h(),";"),"string"==typeof i?e(s,".count+=",i,";"):e(s,".count++;"),b&&(n?e(f=t.def(),"=",l,".getNumPendingQueries();"):e(l,".beginQuery(",s,");"))}function m(e){e(s,".cpuTime+=",h(),"-",a,";"),b&&(n?e(l,".pushScopeStats(",f,",",l,".getNumPendingQueries(),",s,");"):e(l,".endQuery();"))}function v(e){var r=t.def(c,".profile");t(c,".profile=",e,";"),t.exit(c,".profile=",r,";")}if(p){if(te(p)){p.enable?(d(t),m(t.exit),v("true")):v("false");return}v(o=p.append(e,t))}else o=t.def(c,".profile");var g=e.block();d(g),t("if(",o,"){",g,"}");var y=e.block();m(y),t.exit("if(",o,"){",y,"}")}function eG(e,t,r,n,i){var a=e.shared;n.forEach(function(n){var f,o=n.name,u=r.attributes[o];if(u){if(!i(u))return;f=u.append(e,t)}else{if(!i(tn))return;var s=e.scopeAttrib(o);f={},Object.keys(new z).forEach(function(e){f[e]=t.def(s,".",e)})}!function(r,n,i){var f=a.gl,o=t.def(r,".location"),u=t.def(a.attributes,"[",o,"]"),s=i.state,c=i.buffer,l=[i.x,i.y,i.z,i.w],p=["buffer","normalized","offset","stride"];function h(){t("if(!",u,".buffer){",f,".enableVertexAttribArray(",o,");}");var r,a=i.type;if(r=i.size?t.def(i.size,"||",n):n,t("if(",u,".type!==",a,"||",u,".size!==",r,"||",p.map(function(e){return u+"."+e+"!=="+i[e]}).join("||"),"){",f,".bindBuffer(",34962,",",c,".buffer);",f,".vertexAttribPointer(",[o,r,a,i.normalized,i.stride,i.offset],");",u,".type=",a,";",u,".size=",r,";",p.map(function(e){return u+"."+e+"="+i[e]+";"}).join(""),"}"),P){var s=i.divisor;t("if(",u,".divisor!==",s,"){",e.instancing,".vertexAttribDivisorANGLE(",[o,s],");",u,".divisor=",s,";}")}}function d(){t("if(",u,".buffer){",f,".disableVertexAttribArray(",o,");",u,".buffer=null;","}if(",ec.map(function(e,t){return u+"."+e+"!=="+l[t]}).join("||"),"){",f,".vertexAttrib4f(",o,",",l,");",ec.map(function(e,t){return u+"."+e+"="+l[t]+";"}).join(""),"}")}1===s?h():2===s?d():(t("if(",s,"===",1,"){"),h(),t("}else{"),d(),t("}"))}(e.link(n),function(e){switch(e){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(n.info.type),f)})}function eY(e,t,n,i,a,f){for(var o=e.shared,u=o.gl,c=0;c<i.length;++c){var l,p,h=i[c],d=h.name,m=h.info.type,b=n.uniforms[d],v=e.link(h)+".location";if(b){if(!a(b))continue;if(te(b)){var g=b.value;if(35678===m||35680===m){var y=e.link(g._texture||g.color[0]._texture);t(u,".uniform1i(",v,",",y+".bind());"),t.exit(y,".unbind();")}else if(35674===m||35675===m||35676===m){var x=e.global.def("new Float32Array(["+Array.prototype.slice.call(g)+"])"),w=2;35675===m?w=3:35676===m&&(w=4),t(u,".uniformMatrix",w,"fv(",v,",false,",x,");")}else{switch(m){case 5126:l="1f";break;case 35664:l="2f";break;case 35665:l="3f";break;case 35666:l="4f";break;case 35670:case 5124:l="1i";break;case 35671:case 35667:l="2i";break;case 35672:case 35668:l="3i";break;case 35673:case 35669:l="4i"}t(u,".uniform",l,"(",v,",",V(g)?Array.prototype.slice.call(g):g,");")}continue}p=b.append(e,t)}else{if(!a(tn))continue;p=t.def(o.uniforms,"[",r.id(d),"]")}35678===m?t("if(",p,"&&",p,'._reglType==="framebuffer"){',p,"=",p,".color[0];","}"):35680===m&&t("if(",p,"&&",p,'._reglType==="framebufferCube"){',p,"=",p,".color[0];","}");var A=1;switch(m){case 35678:case 35680:var k=t.def(p,"._texture");t(u,".uniform1i(",v,",",k,".bind());"),t.exit(k,".unbind();");continue;case 5124:case 35670:l="1i";break;case 35667:case 35671:l="2i",A=2;break;case 35668:case 35672:l="3i",A=3;break;case 35669:case 35673:l="4i",A=4;break;case 5126:l="1f";break;case 35664:l="2f",A=2;break;case 35665:l="3f",A=3;break;case 35666:l="4f",A=4;break;case 35674:l="Matrix2fv";break;case 35675:l="Matrix3fv";break;case 35676:l="Matrix4fv"}if("M"===l.charAt(0)){t(u,".uniform",l,"(",v,",");var O=Math.pow(m-35674+2,2),E=e.global.def("new Float32Array(",O,")");Array.isArray(p)?t("false,(",s(O,function(e){return E+"["+e+"]="+p[e]}),",",E,")"):t("false,(Array.isArray(",p,")||",p," instanceof Float32Array)?",p,":(",s(O,function(e){return E+"["+e+"]="+p+"["+e+"]"}),",",E,")"),t(");")}else if(A>1){for(var _=[],D=[],T=0;T<A;++T)Array.isArray(p)?D.push(p[T]):D.push(t.def(p+"["+T+"]")),f&&_.push(t.def());f&&t("if(!",e.batchId,"||",_.map(function(e,t){return e+"!=="+D[t]}).join("||"),"){",_.map(function(e,t){return e+"="+D[t]+";"}).join("")),t(u,".uniform",l,"(",v,",",D.join(","),");"),f&&t("}")}else{if(f){var C=t.def();t("if(!",e.batchId,"||",C,"!==",p,"){",C,"=",p,";")}t(u,".uniform",l,"(",v,",",p,");"),f&&t("}")}}}function e$(e,t,r,n){var i,a,f,o,u,s,c,l,p=e.shared,h=p.gl,d=p.draw,m=n.draw,b=(a=m.elements,f=t,a?((a.contextDep&&n.contextDynamic||a.propDep)&&(f=r),i=a.append(e,f),m.elementsActive&&f("if("+i+")"+h+".bindBuffer(34963,"+i+".buffer.buffer);")):(i=f.def(),f(i,"=",d,".",eN,";","if(",i,"){",h,".bindBuffer(",34963,",",i,".buffer.buffer);}","else if(",p.vao,".currentVAO){",i,"=",e.shared.elements+".getElements("+p.vao,".currentVAO.elements);",M?"":"if("+i+")"+h+".bindBuffer(34963,"+i+".buffer.buffer);","}")),i);function v(i){var a=m[i];return a?a.contextDep&&n.contextDynamic||a.propDep?a.append(e,r):a.append(e,t):t.def(d,".",i)}var g=v(eH),y=v(eQ),x=(u=m.count,s=t,u?((u.contextDep&&n.contextDynamic||u.propDep)&&(s=r),o=u.append(e,s)):o=s.def(d,".",eW),o);if("number"==typeof x){if(0===x)return}else r("if(",x,"){"),r.exit("}");P&&(c=v(eq),l=e.instancing);var w=b+".type",A=m.elements&&te(m.elements)&&!m.vaoActive;function k(){function e(){r(l,".drawElementsInstancedANGLE(",[g,x,w,y+"<<(("+w+"-5121)>>1)",c],");")}function t(){r(l,".drawArraysInstancedANGLE(",[g,y,x,c],");")}b&&"null"!==b?A?e():(r("if(",b,"){"),e(),r("}else{"),t(),r("}")):t()}function O(){function e(){r(h+".drawElements("+[g,x,w,y+"<<(("+w+"-5121)>>1)"]+");")}function t(){r(h+".drawArrays("+[g,y,x]+");")}b&&"null"!==b?A?e():(r("if(",b,"){"),e(),r("}else{"),t(),r("}")):t()}P&&("number"!=typeof c||c>=0)?"string"==typeof c?(r("if(",c,">0){"),k(),r("}else if(",c,"<0){"),O(),r("}")):k():O()}function ti(e,t,r,n,i){var a=Z(),f=a.proc("body",i);return P&&(a.instancing=f.def(a.shared.extensions,".angle_instanced_arrays")),e(a,f,r,n),a.compile().body}function ta(e,t,r,n){en(e,t),r.useVAO?r.drawVAO?t(e.shared.vao,".setVAO(",r.drawVAO.append(e,t),");"):t(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(t(e.shared.vao,".setVAO(null);"),eG(e,t,r,n.attributes,function(){return!0})),eY(e,t,r,n.uniforms,function(){return!0},!1),e$(e,t,t,r)}function tf(e,t,r,n){function i(){return!0}e.batchId="a1",en(e,t),eG(e,t,r,n.attributes,i),eY(e,t,r,n.uniforms,i,!1),e$(e,t,t,r)}function to(e,t,r,n){en(e,t);var i=r.contextDep,a=t.def(),f=t.def();e.shared.props=f,e.batchId=a;var o=e.scope(),u=e.scope();function s(e){return e.contextDep&&i||e.propDep}function c(e){return!s(e)}if(t(o.entry,"for(",a,"=0;",a,"<","a1",";++",a,"){",f,"=","a0","[",a,"];",u,"}",o.exit),r.needsContext&&$(e,u,r.context),r.needsFramebuffer&&ee(e,u,r.framebuffer),er(e,u,r.state,s),r.profile&&s(r.profile)&&ei(e,u,r,!1,!0),n)r.useVAO?r.drawVAO?s(r.drawVAO)?u(e.shared.vao,".setVAO(",r.drawVAO.append(e,u),");"):o(e.shared.vao,".setVAO(",r.drawVAO.append(e,o),");"):o(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(o(e.shared.vao,".setVAO(null);"),eG(e,o,r,n.attributes,c),eG(e,u,r,n.attributes,s)),eY(e,o,r,n.uniforms,c,!1),eY(e,u,r,n.uniforms,s,!0),e$(e,o,u,r);else{var l=e.global.def("{}"),p=r.shader.progVar.append(e,u),h=u.def(p,".id"),d=u.def(l,"[",h,"]");u(e.shared.gl,".useProgram(",p,".program);","if(!",d,"){",d,"=",l,"[",h,"]=",e.link(function(t){return ti(tf,e,r,t,2)}),"(",p,");}",d,".call(this,a0[",a,"],",a,");")}}function tu(e,t,r){var n=t.static[r];if(n&&function(e){if(!("object"!=typeof e||V(e))){for(var t=Object.keys(e),r=0;r<t.length;++r)if(i.isDynamic(e[t[r]]))return!0;return!1}}(n)){var a=e.global,f=Object.keys(n),o=!1,u=!1,s=!1,c=e.global.def("{}");f.forEach(function(t){var r=n[t];if(i.isDynamic(r)){"function"==typeof r&&(r=n[t]=i.unbox(r));var f=tr(r,null);o=o||f.thisDep,s=s||f.propDep,u=u||f.contextDep}else{switch(a(c,".",t,"="),typeof r){case"number":a(r);break;case"string":a('"',r,'"');break;case"object":Array.isArray(r)&&a("[",r.join(),"]");break;default:a(e.link(r))}a(";")}}),t.dynamic[r]=new i.DynamicVariable(4,{thisDep:o,contextDep:u,propDep:s,ref:c,append:function(e,t){f.forEach(function(r){var a=n[r];if(i.isDynamic(a)){var f=e.invoke(t,a);t(c,".",r,"=",f,";")}})}}),delete t.static[r]}}return{next:U,current:R,procs:(A=(w=Z()).proc("poll"),k=w.proc("refresh"),A(O=w.block()),k(O),_=(E=w.shared).gl,D=E.next,O(C=E.current,".dirty=false;"),ee(w,A),ee(w,k,null,!0),P&&(y=w.link(P)),n.oes_vertex_array_object&&k(w.link(n.oes_vertex_array_object),".bindVertexArrayOES(null);"),S=k.def(E.attributes),j=k.def(0),(F=w.cond(j,".buffer")).then(_,".enableVertexAttribArray(i);",_,".bindBuffer(",34962,",",j,".buffer.buffer);",_,".vertexAttribPointer(i,",j,".size,",j,".type,",j,".normalized,",j,".stride,",j,".offset);").else(_,".disableVertexAttribArray(i);",_,".vertexAttrib4f(i,",j,".x,",j,".y,",j,".z,",j,".w);",j,".buffer=null;"),k("for(var i=0;i<",B=w.link(a.maxAttributes,{stable:!0}),";++i){",j,"=",S,"[i];",F,"}"),P&&k("for(var i=0;i<",B,";++i){",y,".vertexAttribDivisorANGLE(i,",S,"[i].divisor);","}"),k(w.shared.vao,".currentVAO=null;",w.shared.vao,".setVAO(",w.shared.vao,".targetVAO);"),Object.keys(H).forEach(function(e){var t=H[e],r=O.def(D,".",e),n=w.block();n("if(",r,"){",_,".enable(",t,")}else{",_,".disable(",t,")}",C,".",e,"=",r,";"),k(n),A("if(",r,"!==",C,".",e,"){",n,"}")}),Object.keys(W).forEach(function(e){var t,r,n=W[e],i=R[e],a=w.block();if(a(_,".",n,"("),V(i)){var f=i.length;t=w.global.def(D,".",e),r=w.global.def(C,".",e),a(s(f,function(e){return t+"["+e+"]"}),");",s(f,function(e){return r+"["+e+"]="+t+"["+e+"];"}).join("")),A("if(",s(f,function(e){return t+"["+e+"]!=="+r+"["+e+"]"}).join("||"),"){",a,"}")}else t=O.def(D,".",e),r=O.def(C,".",e),a(t,");",C,".",e,"=",t,";"),A("if(",t,"!==",r,"){",a,"}");k(a)}),w.compile()),compile:function(t,i,a,u,l){var d=Z();d.stats=d.link(l),Object.keys(i.static).forEach(function(e){tu(d,i,e)}),e3.forEach(function(e){tu(d,t,e)});var m=function(e,t,i,a,u){e.static,e.dynamic;var l,d,m,b,v,g,y,w,A,k,O,E,_=function(e,t){var r=e.static;if("string"==typeof r[eU]&&"string"==typeof r[eR]){if(Object.keys(t.dynamic).length>0)return null;var n=t.static,i=Object.keys(n);if(i.length>0&&"number"==typeof n[i[0]]){for(var a=[],f=0;f<i.length;++f)a.push([0|n[i[f]],i[f]]);return a}}return null}(e,t),D=function(e,t){var r=e.static,n=e.dynamic;if(eM in r){var i=r[eM];return i?(i=c.getFramebuffer(i),tt(function(e,t){var r=e.link(i),n=e.shared;t.set(n.framebuffer,".next",r);var a=n.context;return t.set(a,"."+eX,r+".width"),t.set(a,"."+eJ,r+".height"),r})):tt(function(e,t){var r=e.shared;t.set(r.framebuffer,".next","null");var n=r.context;return t.set(n,"."+eX,n+"."+e0),t.set(n,"."+eJ,n+"."+e1),"null"})}if(!(eM in n))return null;var a=n[eM];return tr(a,function(e,t){var r=e.invoke(t,a),n=e.shared,i=n.framebuffer,f=t.def(i,".getFramebuffer(",r,")");t.set(i,".next",f);var o=n.context;return t.set(o,"."+eX,f+"?"+f+".width:"+o+"."+e0),t.set(o,"."+eJ,f+"?"+f+".height:"+o+"."+e1),f})}(e,0),C=function(e,t,r){var n=e.static,i=e.dynamic;function a(e){if(e in n){var r,a,f=n[e],o=!0,u=0|f.x,s=0|f.y;return"width"in f?r=0|f.width:o=!1,"height"in f?a=0|f.height:o=!1,new e9(!o&&t&&t.thisDep,!o&&t&&t.contextDep,!o&&t&&t.propDep,function(e,t){var n=e.shared.context,i=r;"width"in f||(i=t.def(n,".",eX,"-",u));var o=a;return"height"in f||(o=t.def(n,".",eJ,"-",s)),[u,s,i,o]})}if(e in i){var c=i[e],l=tr(c,function(e,t){var r=e.invoke(t,c),n=e.shared.context,i=t.def(r,".x|0"),a=t.def(r,".y|0"),f=t.def('"width" in ',r,"?",r,".width|0:","(",n,".",eX,"-",i,")"),o=t.def('"height" in ',r,"?",r,".height|0:","(",n,".",eJ,"-",a,")");return[i,a,f,o]});return t&&(l.thisDep=l.thisDep||t.thisDep,l.contextDep=l.contextDep||t.contextDep,l.propDep=l.propDep||t.propDep),l}return t?new e9(t.thisDep,t.contextDep,t.propDep,function(e,t){var r=e.shared.context;return[0,0,t.def(r,".",eX),t.def(r,".",eJ)]}):null}var f=a(eP);if(f){var o=f;f=new e9(f.thisDep,f.contextDep,f.propDep,function(e,t){var r=o.append(e,t),n=e.shared.context;return t.set(n,"."+eK,r[2]),t.set(n,"."+eZ,r[3]),r})}return{viewport:f,scissor_box:a(eI)}}(e,D,0),S=function(e,t){var r=e.static,n=e.dynamic,i={},a=!1,f=function(){if("vao"in r){var e=r.vao;return null!==e&&null===p.getVAO(e)&&(e=p.createVAO(e)),a=!0,i.vao=e,tt(function(t){var r=p.getVAO(e);return r?t.link(r):"null"})}if("vao"in n){a=!0;var t=n.vao;return tr(t,function(e,r){var n=e.invoke(r,t);return r.def(e.shared.vao+".getVAO("+n+")")})}return null}(),u=!1,s=function(){if(eN in r){var e=r[eN];if(i.elements=e,e7(e)){var t=i.elements=o.create(e,!0);e=o.getElements(t),u=!0}else e&&(e=o.getElements(e),u=!0);var s=tt(function(t,r){if(e){var n=t.link(e);return t.ELEMENTS=n,n}return t.ELEMENTS=null,null});return s.value=e,s}if(eN in n){u=!0;var c=n[eN];return tr(c,function(e,t){var r=e.shared,n=r.isBufferArgs,i=r.elements,a=e.invoke(t,c),f=t.def("null"),o=t.def(n,"(",a,")"),u=e.cond(o).then(f,"=",i,".createStream(",a,");").else(f,"=",i,".getElements(",a,");");return t.entry(u),t.exit(e.cond(o).then(i,".destroyStream(",f,");")),e.ELEMENTS=f,f})}return a?new e9(f.thisDep,f.contextDep,f.propDep,function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.elements+".getElements("+e.shared.vao+".currentVAO.elements):null")}):null}();function c(e,t){if(e in r){var o=0|r[e];return t?i.offset=o:i.instances=o,tt(function(e,r){return t&&(e.OFFSET=o),o})}if(e in n){var s=n[e];return tr(s,function(e,r){var n=e.invoke(r,s);return t&&(e.OFFSET=n),n})}if(t){if(u)return tt(function(e,t){return e.OFFSET=0,0});if(a)return new e9(f.thisDep,f.contextDep,f.propDep,function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.offset:0")})}else if(a)return new e9(f.thisDep,f.contextDep,f.propDep,function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.instances:-1")});return null}var l=c(eQ,!0),h=function(){if(eH in r){var e=r[eH];return i.primitive=e,tt(function(t,r){return T[e]})}if(eH in n){var t=n[eH];return tr(t,function(e,r){var n=e.constants.primTypes,i=e.invoke(r,t);return r.def(n,"[",i,"]")})}return u?te(s)?s.value?tt(function(e,t){return t.def(e.ELEMENTS,".primType")}):tt(function(){return 4}):new e9(s.thisDep,s.contextDep,s.propDep,function(e,t){var r=e.ELEMENTS;return t.def(r,"?",r,".primType:",4)}):a?new e9(f.thisDep,f.contextDep,f.propDep,function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.primitive:4")}):null}(),d=function(){if(eW in r){var e=0|r[eW];return i.count=e,tt(function(){return e})}if(eW in n){var t=n[eW];return tr(t,function(e,r){return e.invoke(r,t)})}return u?te(s)?s?l?new e9(l.thisDep,l.contextDep,l.propDep,function(e,t){return t.def(e.ELEMENTS,".vertCount-",e.OFFSET)}):tt(function(e,t){return t.def(e.ELEMENTS,".vertCount")}):tt(function(){return -1}):new e9(s.thisDep||l.thisDep,s.contextDep||l.contextDep,s.propDep||l.propDep,function(e,t){var r=e.ELEMENTS;return e.OFFSET?t.def(r,"?",r,".vertCount-",e.OFFSET,":-1"):t.def(r,"?",r,".vertCount:-1")}):a?new e9(f.thisDep,f.contextDep,f.propDep,function(e,t){return t.def(e.shared.vao,".currentVAO?",e.shared.vao,".currentVAO.count:-1")}):null}();return{elements:s,primitive:h,count:d,instances:c(eq,!1),offset:l,vao:f,vaoActive:a,elementsActive:u,static:i}}(e,0),j=(l=e.static,d=e.dynamic,m={},N.forEach(function(e){var t=Q(e);function r(r,n){if(e in l){var i=r(l[e]);m[t]=tt(function(){return i})}else if(e in d){var a=d[e];m[t]=tr(a,function(e,t){return n(e,t,e.invoke(t,a))})}}switch(e){case ew:case ep:case el:case eS:case eb:case ez:case eE:case eD:case eT:case ey:return r(function(e){return e},function(e,t,r){return r});case ev:return r(function(e){return e6[e]},function(e,t,r){var n=e.constants.compareFuncs;return t.def(n,"[",r,"]")});case eg:return r(function(e){return e},function(e,t,r){return[t.def("+",r,"[0]"),t.def("+",r,"[1]")]});case em:return r(function(e){var t="srcRGB"in e?e.srcRGB:e.src,r="srcAlpha"in e?e.srcAlpha:e.src,n="dstRGB"in e?e.dstRGB:e.dst,i="dstAlpha"in e?e.dstAlpha:e.dst;return[e2[t],e2[n],e2[r],e2[i]]},function(e,t,r){var n=e.constants.blendFuncs;function i(e,n){return t.def('"',e,n,'" in ',r,"?",r,".",e,n,":",r,".",e)}var a=i("src","RGB"),f=i("dst","RGB"),o=t.def(n,"[",a,"]"),u=t.def(n,"[",i("src","Alpha"),"]");return[o,t.def(n,"[",f,"]"),u,t.def(n,"[",i("dst","Alpha"),"]")]});case ed:return r(function(e){return"string"==typeof e?[I[e],I[e]]:"object"==typeof e?[I[e.rgb],I[e.alpha]]:void 0},function(e,t,r){var n=e.constants.blendEquations,i=t.def(),a=t.def(),f=e.cond("typeof ",r,'==="string"');return f.then(i,"=",a,"=",n,"[",r,"];"),f.else(i,"=",n,"[",r,".rgb];",a,"=",n,"[",r,".alpha];"),t(f),[i,a]});case eh:return r(function(e){return s(4,function(t){return+e[t]})},function(e,t,r){return s(4,function(e){return t.def("+",r,"[",e,"]")})});case ej:return r(function(e){return 0|e},function(e,t,r){return t.def(r,"|0")});case eV:return r(function(e){var t=e.cmp||"keep",r=e.ref||0,n="mask"in e?e.mask:-1;return[e6[t],r,n]},function(e,t,r){var n=e.constants.compareFuncs;return[t.def('"cmp" in ',r,"?",n,"[",r,".cmp]",":",7680),t.def(r,".ref|0"),t.def('"mask" in ',r,"?",r,".mask|0:-1")]});case eF:case eB:return r(function(t){var r=t.fail||"keep",n=t.zfail||"keep",i=t.zpass||"keep";return[e===eB?1029:1028,e5[r],e5[n],e5[i]]},function(t,r,n){var i=t.constants.stencilOps;function a(e){return r.def('"',e,'" in ',n,"?",i,"[",n,".",e,"]:",7680)}return[e===eB?1029:1028,a("fail"),a("zfail"),a("zpass")]});case e_:return r(function(e){return[0|e.factor,0|e.units]},function(e,t,r){return[t.def(r,".factor|0"),t.def(r,".units|0")]});case eA:return r(function(e){var t=0;return"front"===e?t=1028:"back"===e&&(t=1029),t},function(e,t,r){return t.def(r,'==="front"?',1028,":",1029)});case eO:return r(function(e){return e},function(e,t,r){return r});case ek:return r(function(e){return e4[e]},function(e,t,r){return t.def(r+'==="cw"?2304:2305')});case ex:return r(function(e){return e.map(function(e){return!!e})},function(e,t,r){return s(4,function(e){return"!!"+r+"["+e+"]"})});case eC:return r(function(e){return["value"in e?e.value:1,!!e.invert]},function(e,t,r){return[t.def('"value" in ',r,"?+",r,".value:1"),t.def("!!",r,".invert")]})}}),m),F=function(e,t,n){var i,a=e.static,f=e.dynamic;function o(e){if(e in a){var t=r.id(a[e]),n=tt(function(){return t});return n.id=t,n}if(e in f){var i=f[e];return tr(i,function(e,t){var r=e.invoke(t,i);return t.def(e.shared.strings,".id(",r,")")})}return null}var u=o(eU),s=o(eR),c=null;return te(u)&&te(s)?(c=h.program(s.id,u.id,null,n),i=tt(function(e,t){return e.link(c)})):i=new e9(u&&u.thisDep||s&&s.thisDep,u&&u.contextDep||s&&s.contextDep,u&&u.propDep||s&&s.propDep,function(e,t){var r,n,i=e.shared.shader;r=u?u.append(e,t):t.def(i,".",eU),n=s?s.append(e,t):t.def(i,".",eR);var a=i+".program("+n+","+r;return t.def(a+")")}),{frag:u,vert:s,progVar:i,program:c}}(e,0,_);function B(e){var t=C[e];t&&(j[e]=t)}B(eP),B(Q(eI));var P=Object.keys(j).length>0,L={framebuffer:D,draw:S,shader:F,state:j,dirty:P,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(L.profile=function(e){var t,r=e.static,n=e.dynamic;if(eL in r){var i=!!r[eL];(t=tt(function(e,t){return i})).enable=i}else if(eL in n){var a=n[eL];t=tr(a,function(e,t){return e.invoke(t,a)})}return t}(e,u),L.uniforms=(b=i.static,v=i.dynamic,g={},Object.keys(b).forEach(function(e){var t,r=b[e];if("number"==typeof r||"boolean"==typeof r)t=tt(function(){return r});else if("function"==typeof r){var n=r._reglType;"texture2d"===n||"textureCube"===n?t=tt(function(e){return e.link(r)}):("framebuffer"===n||"framebufferCube"===n)&&(t=tt(function(e){return e.link(r.color[0])}))}else V(r)&&(t=tt(function(e){return e.global.def("[",s(r.length,function(e){return r[e]}),"]")}));t.value=r,g[e]=t}),Object.keys(v).forEach(function(e){var t=v[e];g[e]=tr(t,function(e,r){return e.invoke(r,t)})}),g),L.drawVAO=L.scopeVAO=S.vao,!L.drawVAO&&F.program&&!_&&n.angle_instanced_arrays&&S.static.elements){var M=!0,R=F.program.attributes.map(function(e){var r=t.static[e];return M=M&&!!r,r});if(M&&R.length>0){var U=p.getVAO(p.createVAO({attributes:R,elements:S.static.elements}));L.drawVAO=new e9(null,null,null,function(e,t){return e.link(U)}),L.useVAO=!0}}return _?L.useVAO=!0:L.attributes=(y=t.static,w=t.dynamic,A={},Object.keys(y).forEach(function(e){var t=y[e],n=r.id(e),i=new z;if(e7(t))i.state=1,i.buffer=f.getBuffer(f.create(t,34962,!1,!0)),i.type=0;else{var a=f.getBuffer(t);if(a)i.state=1,i.buffer=a,i.type=0;else if("constant"in t){var o=t.constant;i.buffer="null",i.state=2,"number"==typeof o?i.x=o:ec.forEach(function(e,t){t<o.length&&(i[e]=o[t])})}else{a=e7(t.buffer)?f.getBuffer(f.create(t.buffer,34962,!1,!0)):f.getBuffer(t.buffer);var u=0|t.offset,s=0|t.stride,c=0|t.size,l=!!t.normalized,p=0;"type"in t&&(p=x[t.type]);var h=0|t.divisor;i.buffer=a,i.state=1,i.size=c,i.normalized=l,i.type=p||a.dtype,i.offset=u,i.stride=s,i.divisor=h}}A[e]=tt(function(e,t){var r=e.attribCache;if(n in r)return r[n];var a={isStream:!1};return Object.keys(i).forEach(function(e){a[e]=i[e]}),i.buffer&&(a.buffer=e.link(i.buffer),a.type=a.type||a.buffer+".dtype"),r[n]=a,a})}),Object.keys(w).forEach(function(e){var t=w[e];A[e]=tr(t,function(e,r){var n=e.invoke(r,t),i=e.shared,a=e.constants,f=i.isBufferArgs,o=i.buffer,u={isStream:r.def(!1)},s=new z;s.state=1,Object.keys(s).forEach(function(e){u[e]=r.def(""+s[e])});var c=u.buffer,l=u.type;function p(e){r(u[e],"=",n,".",e,"|0;")}return r("if(",f,"(",n,")){",u.isStream,"=true;",c,"=",o,".createStream(",34962,",",n,");",l,"=",c,".dtype;","}else{",c,"=",o,".getBuffer(",n,");","if(",c,"){",l,"=",c,".dtype;",'}else if("constant" in ',n,"){",u.state,"=",2,";","if(typeof "+n+'.constant === "number"){',u[ec[0]],"=",n,".constant;",ec.slice(1).map(function(e){return u[e]}).join("="),"=0;","}else{",ec.map(function(e,t){return u[e]+"="+n+".constant.length>"+t+"?"+n+".constant["+t+"]:0;"}).join(""),"}}else{","if(",f,"(",n,".buffer)){",c,"=",o,".createStream(",34962,",",n,".buffer);","}else{",c,"=",o,".getBuffer(",n,".buffer);","}",l,'="type" in ',n,"?",a.glTypes,"[",n,".type]:",c,".dtype;",u.normalized,"=!!",n,".normalized;"),p("size"),p("offset"),p("stride"),p("divisor"),r("}}"),r.exit("if(",u.isStream,"){",o,".destroyStream(",c,");","}"),u})}),A),L.context=(k=a.static,O=a.dynamic,E={},Object.keys(k).forEach(function(e){var t=k[e];E[e]=tt(function(e,r){return"number"==typeof t||"boolean"==typeof t?""+t:e.link(t)})}),Object.keys(O).forEach(function(e){var t=O[e];E[e]=tr(t,function(e,r){return e.invoke(r,t)})}),E),L}(t,i,a,u,d);return m.shader.program&&(m.shader.program.attributes.sort(function(e,t){return e.name<t.name?-1:1}),m.shader.program.uniforms.sort(function(e,t){return e.name<t.name?-1:1})),function(e,t){var r=e.proc("draw",1);en(e,r),$(e,r,t.context),ee(e,r,t.framebuffer),et(e,r,t),er(e,r,t.state),ei(e,r,t,!1,!0);var n=t.shader.progVar.append(e,r);if(r(e.shared.gl,".useProgram(",n,".program);"),t.shader.program)ta(e,r,t,t.shader.program);else{r(e.shared.vao,".setVAO(null);");var i=e.global.def("{}"),a=r.def(n,".id"),f=r.def(i,"[",a,"]");r(e.cond(f).then(f,".call(this,a0);").else(f,"=",i,"[",a,"]=",e.link(function(r){return ti(ta,e,t,r,1)}),"(",n,");",f,".call(this,a0);"))}Object.keys(t.state).length>0&&r(e.shared.current,".dirty=true;"),e.shared.vao&&r(e.shared.vao,".setVAO(null);")}(d,m),function(e,t){var n=e.proc("scope",3);e.batchId="a2";var i=e.shared,a=i.current;if($(e,n,t.context),t.framebuffer&&t.framebuffer.append(e,n),e8(Object.keys(t.state)).forEach(function(r){var a=t.state[r],f=a.append(e,n);V(f)?f.forEach(function(t,i){Y(t)?n.set(e.next[r],"["+i+"]",t):n.set(e.next[r],"["+i+"]",e.link(t,{stable:!0}))}):te(a)?n.set(i.next,"."+r,e.link(f,{stable:!0})):n.set(i.next,"."+r,f)}),ei(e,n,t,!0,!0),[eN,eQ,eW,eq,eH].forEach(function(r){var a=t.draw[r];if(a){var f=a.append(e,n);Y(f)?n.set(i.draw,"."+r,f):n.set(i.draw,"."+r,e.link(f),{stable:!0})}}),Object.keys(t.uniforms).forEach(function(a){var f=t.uniforms[a].append(e,n);Array.isArray(f)&&(f="["+f.map(function(t){return Y(t)?t:e.link(t,{stable:!0})})+"]"),n.set(i.uniforms,"["+e.link(r.id(a),{stable:!0})+"]",f)}),Object.keys(t.attributes).forEach(function(r){var i=t.attributes[r].append(e,n),a=e.scopeAttrib(r);Object.keys(new z).forEach(function(e){n.set(a,"."+e,i[e])})}),t.scopeVAO){var f=t.scopeVAO.append(e,n);Y(f)?n.set(i.vao,".targetVAO",f):n.set(i.vao,".targetVAO",e.link(f,{stable:!0}))}function o(r){var a=t.shader[r];if(a){var f=a.append(e,n);Y(f)?n.set(i.shader,"."+r,f):n.set(i.shader,"."+r,e.link(f,{stable:!0}))}}o(eR),o(eU),Object.keys(t.state).length>0&&(n(a,".dirty=true;"),n.exit(a,".dirty=true;")),n("a1(",e.shared.context,",a0,",e.batchId,");")}(d,m),function(e,t){var r=e.proc("batch",2);e.batchId="0",en(e,r);var n=!1,i=!0;Object.keys(t.context).forEach(function(e){n=n||t.context[e].propDep}),n||($(e,r,t.context),i=!1);var a=t.framebuffer,f=!1;function o(e){return e.contextDep&&n||e.propDep}a?(a.propDep?n=f=!0:a.contextDep&&n&&(f=!0),f||ee(e,r,a)):ee(e,r,null),t.state.viewport&&t.state.viewport.propDep&&(n=!0),et(e,r,t),er(e,r,t.state,function(e){return!o(e)}),t.profile&&o(t.profile)||ei(e,r,t,!1,"a1"),t.contextDep=n,t.needsContext=i,t.needsFramebuffer=f;var u=t.shader.progVar;if(u.contextDep&&n||u.propDep)to(e,r,t,null);else{var s=u.append(e,r);if(r(e.shared.gl,".useProgram(",s,".program);"),t.shader.program)to(e,r,t,t.shader.program);else{r(e.shared.vao,".setVAO(null);");var c=e.global.def("{}"),l=r.def(s,".id"),p=r.def(c,"[",l,"]");r(e.cond(p).then(p,".call(this,a0,a1);").else(p,"=",c,"[",l,"]=",e.link(function(r){return ti(to,e,t,r,2)}),"(",s,");",p,".call(this,a0,a1);"))}}Object.keys(t.state).length>0&&r(e.shared.current,".dirty=true;"),e.shared.vao&&r(e.shared.vao,".setVAO(null);")}(d,m),e(d.compile(),{destroy:function(){m.shader.program.destroy()}})}}}(l,C,H,tu,ts,tc,0,tm,{},tl,tp,e$,eY,W,I,c),tv=function(e,t,r,n,i,a,f){function o(i){a=null===t.next?5121:t.next.colorAttachments[0].texture._texture.type;var a,f=0,o=0,u=n.framebufferWidth,s=n.framebufferHeight,c=null;d(i)?c=i:i&&(f=0|i.x,o=0|i.y,u=0|(i.width||n.framebufferWidth-f),s=0|(i.height||n.framebufferHeight-o),c=i.data||null),r();var l=u*s*4;return c||(5121===a?c=new Uint8Array(l):5126===a&&(c=c||new Float32Array(l))),e.pixelStorei(3333,4),e.readPixels(f,o,u,s,6408,a,c),c}return function(e){var r;return e&&"framebuffer"in e?(t.setFBO({framebuffer:e.framebuffer},function(){r=o(e)}),r):o(e)}}(l,tm,tb.procs.poll,eY,0,0,0),tg=tb.next,ty=l.canvas,tx=[],tw=[],tA=[],tk=[c.onDestroy],tO=null;function tE(){if(0===tx.length){W&&W.update(),tO=null;return}tO=a.next(tE),tz();for(var e=tx.length-1;e>=0;--e){var t=tx[e];t&&t(eY,null,0)}l.flush(),W&&W.update()}function t_(){!tO&&tx.length>0&&(tO=a.next(tE))}function tD(){tO&&(a.cancel(tE),tO=null)}function tT(e){e.preventDefault(),tD(),tw.forEach(function(e){e()})}function tC(e){l.getError(),y.restore(),tp.restore(),ts.restore(),th.restore(),td.restore(),tm.restore(),tl.restore(),W&&W.restore(),tb.procs.refresh(),t_(),tA.forEach(function(e){e()})}function tS(t){function r(e,t){var r={},n={};return Object.keys(e).forEach(function(a){var f=e[a];if(i.isDynamic(f)){n[a]=i.unbox(f,a);return}if(t&&Array.isArray(f)){for(var o=0;o<f.length;++o)if(i.isDynamic(f[o])){n[a]=i.unbox(f,a);return}}r[a]=f}),{dynamic:n,static:r}}var n=r(t.context||{},!0),a=r(t.uniforms||{},!0),f=r(t.attributes||{},!1),o=r(function(t){var r=e({},t);function n(e){if(e in r){var t=r[e];delete r[e],Object.keys(t).forEach(function(n){r[e+"."+n]=t[n]})}}return delete r.uniforms,delete r.attributes,delete r.context,delete r.vao,"stencil"in r&&r.stencil.op&&(r.stencil.opBack=r.stencil.opFront=r.stencil.op,delete r.stencil.op),n("blend"),n("depth"),n("cull"),n("stencil"),n("polygonOffset"),n("scissor"),n("sample"),"vao"in t&&(r.vao=t.vao),r}(t),!1),u={gpuTime:0,cpuTime:0,count:0},s=tb.compile(o,f,a,n,u),c=s.draw,l=s.batch,p=s.scope,h=[];return e(function(e,t){var r;if("function"==typeof e)return p.call(this,null,e,0);if("function"==typeof t){if("number"==typeof e)for(r=0;r<e;++r)p.call(this,null,t,r);else if(!Array.isArray(e))return p.call(this,e,t,0);else for(r=0;r<e.length;++r)p.call(this,e[r],t,r)}else if("number"==typeof e){if(e>0)return l.call(this,function(e){for(;h.length<e;)h.push(null);return h}(0|e),0|e)}else if(!Array.isArray(e))return c.call(this,e);else if(e.length)return l.call(this,e,e.length)},{stats:u,destroy:function(){s.destroy()}})}ty&&(ty.addEventListener(ta,tT,!1),ty.addEventListener(tf,tC,!1));var tj=tm.setFBO=tS({framebuffer:i.define.call(null,1,"framebuffer")});function tV(e,t){var r=0;tb.procs.poll();var n=t.color;n&&(l.clearColor(+n[0]||0,+n[1]||0,+n[2]||0,+n[3]||0),r|=16384),"depth"in t&&(l.clearDepth(+t.depth),r|=256),"stencil"in t&&(l.clearStencil(0|t.stencil),r|=1024),l.clear(r)}function tF(e){return tx.push(e),t_(),{cancel:function(){var t=to(tx,e);tx[t]=function e(){var t=to(tx,e);tx[t]=tx[tx.length-1],tx.length-=1,tx.length<=0&&tD()}}}}function tB(){var e=tg.viewport,t=tg.scissor_box;e[0]=e[1]=t[0]=t[1]=0,eY.viewportWidth=eY.framebufferWidth=eY.drawingBufferWidth=e[2]=t[2]=l.drawingBufferWidth,eY.viewportHeight=eY.framebufferHeight=eY.drawingBufferHeight=e[3]=t[3]=l.drawingBufferHeight}function tz(){eY.tick+=1,eY.time=tP(),tB(),tb.procs.poll()}function tI(){th.refresh(),tB(),tb.procs.refresh(),W&&W.update()}function tP(){return(f()-Q)/1e3}tI();var tL=e(tS,{clear:function(t){if("framebuffer"in t){if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var r=0;r<6;++r)tj(e({framebuffer:t.framebuffer.faces[r]},t),tV);else tj(t,tV)}else tV(null,t)},prop:i.define.bind(null,1),context:i.define.bind(null,2),this:i.define.bind(null,3),draw:tS({}),buffer:function(e){return ts.create(e,34962,!1,!1)},elements:function(e){return tc.create(e,!1)},texture:th.create2D,cube:th.createCube,renderbuffer:td.create,framebuffer:tm.create,framebufferCube:tm.createCube,vao:tl.createVAO,attributes:g,frame:tF,on:function(e,t){var r;switch(e){case"frame":return tF(t);case"lost":r=tw;break;case"restore":r=tA;break;case"destroy":r=tk}return r.push(t),{cancel:function(){for(var e=0;e<r.length;++e)if(r[e]===t){r[e]=r[r.length-1],r.pop();return}}}},limits:tu,hasExtension:function(e){return tu.extensions.indexOf(e.toLowerCase())>=0},read:tv,destroy:function(){tx.length=0,tD(),ty&&(ty.removeEventListener(ta,tT),ty.removeEventListener(tf,tC)),tp.clear(),tm.clear(),td.clear(),tl.clear(),th.clear(),tc.clear(),ts.clear(),W&&W.clear(),tk.forEach(function(e){e()})},_gl:l,_refresh:tI,poll:function(){tz(),W&&W.update()},now:tP,stats:S,getCachedCode:function(){return I},preloadCachedCode:function(e){Object.entries(e).forEach(function(e){I[e[0]]=e[1]})}});return c.onDone(null,tL),tL}},e.exports=t()}}]);